[{"path":"src/app/auth/auth.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Component, HostListener, NgZone, OnDestroy, OnInit } from \u0027@angular/core\u0027;","lastModifiedDate":"2021-01-09"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { AuthService, AuthState } from \u0027../core/services/auth.service\u0027;","lastModifiedDate":"2019-01-18"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { Subscription } from \u0027rxjs\u0027;","lastModifiedDate":"2020-08-30"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { FormBuilder, FormGroup, Validators } from \u0027@angular/forms\u0027;","lastModifiedDate":"2020-08-30"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import { ErrorHandlingService } from \u0027../core/services/error-handling.service\u0027;","lastModifiedDate":"2019-02-07"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import { ActivatedRoute, Router } from \u0027@angular/router\u0027;","lastModifiedDate":"2021-01-09"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import { GithubService } from \u0027../core/services/github.service\u0027;","lastModifiedDate":"2019-02-16"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import { PhaseService } from \u0027../core/services/phase.service\u0027;","lastModifiedDate":"2019-02-24"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import { Title } from \u0027@angular/platform-browser\u0027;","lastModifiedDate":"2019-05-17"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import { Profile } from \u0027../core/models/profile.model\u0027;","lastModifiedDate":"2021-03-12"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import { filter, flatMap } from \u0027rxjs/operators\u0027;","lastModifiedDate":"2021-01-09"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import { UserService } from \u0027../core/services/user.service\u0027;","lastModifiedDate":"2019-07-10"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import { GithubEventService } from \u0027../core/services/githubevent.service\u0027;","lastModifiedDate":"2019-07-10"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import { ElectronService } from \u0027../core/services/electron.service\u0027;","lastModifiedDate":"2020-02-03"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import { ApplicationService } from \u0027../core/services/application.service\u0027;","lastModifiedDate":"2019-12-17"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import { throwIfFalse } from \u0027../shared/lib/custom-ops\u0027;","lastModifiedDate":"2020-10-07"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import { AppConfig } from \u0027../../environments/environment\u0027;","lastModifiedDate":"2021-01-09"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import { GithubUser } from \u0027../core/models/github-user.model\u0027;","lastModifiedDate":"2020-03-04"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import { LoggingService } from \u0027../core/services/logging.service\u0027;","lastModifiedDate":"2021-03-13"},{"lineNumber":20,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-14"},{"lineNumber":21,"author":{"gitId":"-"},"content":"@Component({","lastModifiedDate":"2019-01-14"},{"lineNumber":22,"author":{"gitId":"-"},"content":"  selector: \u0027app-auth\u0027,","lastModifiedDate":"2019-01-18"},{"lineNumber":23,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./auth.component.html\u0027,","lastModifiedDate":"2019-01-18"},{"lineNumber":24,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./auth.component.css\u0027]","lastModifiedDate":"2019-01-18"},{"lineNumber":25,"author":{"gitId":"-"},"content":"})","lastModifiedDate":"2019-01-14"},{"lineNumber":26,"author":{"gitId":"-"},"content":"export class AuthComponent implements OnInit, OnDestroy {","lastModifiedDate":"2019-01-18"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  // isReady is used to indicate whether the pre-processing of application is done.","lastModifiedDate":"2020-03-04"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  isReady: boolean;","lastModifiedDate":"2019-12-17"},{"lineNumber":29,"author":{"gitId":"-"},"content":"  // isSettingUpSession is used to indicate whether CATcher is in the midst of setting up the session.","lastModifiedDate":"2020-03-04"},{"lineNumber":30,"author":{"gitId":"-"},"content":"  isSettingUpSession: boolean;","lastModifiedDate":"2020-03-04"},{"lineNumber":31,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-03-04"},{"lineNumber":32,"author":{"gitId":"-"},"content":"  // Errors","lastModifiedDate":"2020-03-04"},{"lineNumber":33,"author":{"gitId":"-"},"content":"  isAppOutdated: boolean;","lastModifiedDate":"2019-12-17"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  versionCheckingError: boolean;","lastModifiedDate":"2019-12-17"},{"lineNumber":35,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-03-04"},{"lineNumber":36,"author":{"gitId":"-"},"content":"  authState: AuthState;","lastModifiedDate":"2019-01-16"},{"lineNumber":37,"author":{"gitId":"-"},"content":"  accessTokenSubscription: Subscription;","lastModifiedDate":"2021-01-09"},{"lineNumber":38,"author":{"gitId":"-"},"content":"  authStateSubscription: Subscription;","lastModifiedDate":"2019-01-16"},{"lineNumber":39,"author":{"gitId":"-"},"content":"  profileForm: FormGroup;","lastModifiedDate":"2020-02-03"},{"lineNumber":40,"author":{"gitId":"-"},"content":"  currentUserName: string;","lastModifiedDate":"2020-02-03"},{"lineNumber":41,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-14"},{"lineNumber":42,"author":{"gitId":"-"},"content":"  constructor(public appService: ApplicationService,","lastModifiedDate":"2021-01-09"},{"lineNumber":43,"author":{"gitId":"-"},"content":"              public electronService: ElectronService,","lastModifiedDate":"2021-01-09"},{"lineNumber":44,"author":{"gitId":"-"},"content":"              private githubService: GithubService,","lastModifiedDate":"2019-07-10"},{"lineNumber":45,"author":{"gitId":"-"},"content":"              private authService: AuthService,","lastModifiedDate":"2021-01-09"},{"lineNumber":46,"author":{"gitId":"-"},"content":"              private githubEventService: GithubEventService,","lastModifiedDate":"2019-07-10"},{"lineNumber":47,"author":{"gitId":"-"},"content":"              private userService: UserService,","lastModifiedDate":"2019-07-10"},{"lineNumber":48,"author":{"gitId":"-"},"content":"              private formBuilder: FormBuilder,","lastModifiedDate":"2019-02-07"},{"lineNumber":49,"author":{"gitId":"-"},"content":"              private errorHandlingService: ErrorHandlingService,","lastModifiedDate":"2019-02-07"},{"lineNumber":50,"author":{"gitId":"-"},"content":"              private router: Router,","lastModifiedDate":"2019-02-24"},{"lineNumber":51,"author":{"gitId":"-"},"content":"              private phaseService: PhaseService,","lastModifiedDate":"2019-04-19"},{"lineNumber":52,"author":{"gitId":"-"},"content":"              private titleService: Title,","lastModifiedDate":"2019-12-17"},{"lineNumber":53,"author":{"gitId":"-"},"content":"              private ngZone: NgZone,","lastModifiedDate":"2020-02-03"},{"lineNumber":54,"author":{"gitId":"-"},"content":"              private activatedRoute: ActivatedRoute,","lastModifiedDate":"2021-03-14"},{"lineNumber":55,"author":{"gitId":"-"},"content":"              private logger: LoggingService","lastModifiedDate":"2021-03-14"},{"lineNumber":56,"author":{"gitId":"-"},"content":"  ) {","lastModifiedDate":"2021-01-09"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    this.electronService.registerIpcListener(\u0027github-oauth-reply\u0027,","lastModifiedDate":"2021-01-09"},{"lineNumber":58,"author":{"gitId":"-"},"content":"      (event, {token, error, isWindowClosed}) \u003d\u003e {","lastModifiedDate":"2020-03-04"},{"lineNumber":59,"author":{"gitId":"-"},"content":"      this.ngZone.run(() \u003d\u003e {","lastModifiedDate":"2020-02-03"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        if (error) {","lastModifiedDate":"2020-03-04"},{"lineNumber":61,"author":{"gitId":"-"},"content":"          if (!isWindowClosed) {","lastModifiedDate":"2020-03-04"},{"lineNumber":62,"author":{"gitId":"-"},"content":"            this.errorHandlingService.handleError(error);","lastModifiedDate":"2020-02-03"},{"lineNumber":63,"author":{"gitId":"-"},"content":"          }","lastModifiedDate":"2020-02-03"},{"lineNumber":64,"author":{"gitId":"-"},"content":"          this.goToSessionSelect();","lastModifiedDate":"2020-08-30"},{"lineNumber":65,"author":{"gitId":"-"},"content":"          return;","lastModifiedDate":"2020-02-03"},{"lineNumber":66,"author":{"gitId":"-"},"content":"        }","lastModifiedDate":"2020-02-03"},{"lineNumber":67,"author":{"gitId":"-"},"content":"        this.authService.storeOAuthAccessToken(token);","lastModifiedDate":"2020-09-12"},{"lineNumber":68,"author":{"gitId":"-"},"content":"      });","lastModifiedDate":"2020-02-03"},{"lineNumber":69,"author":{"gitId":"-"},"content":"    });","lastModifiedDate":"2020-02-03"},{"lineNumber":70,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-02-03"},{"lineNumber":71,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-14"},{"lineNumber":72,"author":{"gitId":"-"},"content":"  ngOnInit() {","lastModifiedDate":"2019-01-14"},{"lineNumber":73,"author":{"gitId":"-"},"content":"    this.logger.startSession();","lastModifiedDate":"2021-03-14"},{"lineNumber":74,"author":{"gitId":"-"},"content":"    this.isReady \u003d false;","lastModifiedDate":"2021-01-09"},{"lineNumber":75,"author":{"gitId":"-"},"content":"    const oauthCode \u003d this.activatedRoute.snapshot.queryParamMap.get(\u0027code\u0027);","lastModifiedDate":"2021-01-09"},{"lineNumber":76,"author":{"gitId":"-"},"content":"    const state \u003d this.activatedRoute.snapshot.queryParamMap.get(\u0027state\u0027);","lastModifiedDate":"2021-03-07"},{"lineNumber":77,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2021-01-09"},{"lineNumber":78,"author":{"gitId":"-"},"content":"    if (this.authService.isAuthenticated()) {","lastModifiedDate":"2021-01-09"},{"lineNumber":79,"author":{"gitId":"-"},"content":"      this.router.navigate([this.phaseService.currentPhase]);","lastModifiedDate":"2021-01-09"},{"lineNumber":80,"author":{"gitId":"-"},"content":"      return;","lastModifiedDate":"2021-01-09"},{"lineNumber":81,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2021-01-09"},{"lineNumber":82,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2021-01-09"},{"lineNumber":83,"author":{"gitId":"-"},"content":"    if (oauthCode) { // In the web\u0027s oauth window","lastModifiedDate":"2021-01-09"},{"lineNumber":84,"author":{"gitId":"-"},"content":"      this.logger.info(\u0027Obtained authorisation code from Github\u0027);","lastModifiedDate":"2021-03-14"},{"lineNumber":85,"author":{"gitId":"-"},"content":"      window.opener.postMessage({ oauthCode, state }, AppConfig.origin);","lastModifiedDate":"2021-03-07"},{"lineNumber":86,"author":{"gitId":"-"},"content":"      this.logger.info(\u0027Sent authorisation code and state to main application window, waiting to close\u0027);","lastModifiedDate":"2021-03-14"},{"lineNumber":87,"author":{"gitId":"-"},"content":"      this.listenForCloseOAuthWindowMessage();","lastModifiedDate":"2021-01-09"},{"lineNumber":88,"author":{"gitId":"-"},"content":"    } else { // In the main app window","lastModifiedDate":"2021-01-09"},{"lineNumber":89,"author":{"gitId":"-"},"content":"      this.checkAppIsOutdated();","lastModifiedDate":"2019-12-17"},{"lineNumber":90,"author":{"gitId":"-"},"content":"      this.initAccessTokenSubscription();","lastModifiedDate":"2021-01-09"},{"lineNumber":91,"author":{"gitId":"-"},"content":"      this.initAuthStateSubscription();","lastModifiedDate":"2021-01-09"},{"lineNumber":92,"author":{"gitId":"-"},"content":"      this.initProfileForm();","lastModifiedDate":"2021-01-09"},{"lineNumber":93,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2021-01-09"},{"lineNumber":94,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2021-01-09"},{"lineNumber":95,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2021-01-09"},{"lineNumber":96,"author":{"gitId":"-"},"content":"  /**","lastModifiedDate":"2021-01-09"},{"lineNumber":97,"author":{"gitId":"-"},"content":"   * A listener for receiving the oauthCode from the oauth window.","lastModifiedDate":"2021-01-09"},{"lineNumber":98,"author":{"gitId":"-"},"content":"   * With the oauth code, we can retrieve the accessToken from the proxy.","lastModifiedDate":"2021-01-09"},{"lineNumber":99,"author":{"gitId":"-"},"content":"   */","lastModifiedDate":"2021-01-09"},{"lineNumber":100,"author":{"gitId":"-"},"content":"  @HostListener(\u0027window:message\u0027, [\u0027$event\u0027])","lastModifiedDate":"2021-01-09"},{"lineNumber":101,"author":{"gitId":"-"},"content":"  onMessage(event: MessageEvent) {","lastModifiedDate":"2021-01-09"},{"lineNumber":102,"author":{"gitId":"-"},"content":"    if (event.origin !\u003d\u003d AppConfig.origin) {","lastModifiedDate":"2021-01-09"},{"lineNumber":103,"author":{"gitId":"-"},"content":"      return;","lastModifiedDate":"2021-01-09"},{"lineNumber":104,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2021-01-09"},{"lineNumber":105,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2021-03-07"},{"lineNumber":106,"author":{"gitId":"-"},"content":"    const { oauthCode, state } \u003d event.data;","lastModifiedDate":"2021-03-07"},{"lineNumber":107,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2021-01-09"},{"lineNumber":108,"author":{"gitId":"-"},"content":"    if (!oauthCode) {","lastModifiedDate":"2021-01-09"},{"lineNumber":109,"author":{"gitId":"-"},"content":"        return;","lastModifiedDate":"2021-01-09"},{"lineNumber":110,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2021-01-09"},{"lineNumber":111,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2021-03-07"},{"lineNumber":112,"author":{"gitId":"-"},"content":"    if (!this.authService.isReturnedStateSame(state)) {","lastModifiedDate":"2021-03-07"},{"lineNumber":113,"author":{"gitId":"-"},"content":"      this.logger.info(`Received incorrect state ${state}, continue waiting for correct state`);","lastModifiedDate":"2021-03-14"},{"lineNumber":114,"author":{"gitId":"-"},"content":"      return;","lastModifiedDate":"2021-03-07"},{"lineNumber":115,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2021-03-07"},{"lineNumber":116,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2021-03-07"},{"lineNumber":117,"author":{"gitId":"-"},"content":"    this.logger.info(\u0027Retrieving access token from Github\u0027);","lastModifiedDate":"2021-03-14"},{"lineNumber":118,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2021-03-14"},{"lineNumber":119,"author":{"gitId":"-"},"content":"    const accessTokenUrl \u003d `${AppConfig.accessTokenUrl}/${oauthCode}/client_id/${AppConfig.clientId}`;","lastModifiedDate":"2021-01-09"},{"lineNumber":120,"author":{"gitId":"-"},"content":"    fetch(accessTokenUrl).then(res \u003d\u003e res.json())","lastModifiedDate":"2021-01-09"},{"lineNumber":121,"author":{"gitId":"-"},"content":"      .then(data \u003d\u003e {","lastModifiedDate":"2021-01-09"},{"lineNumber":122,"author":{"gitId":"-"},"content":"          if (data.error) {","lastModifiedDate":"2021-01-09"},{"lineNumber":123,"author":{"gitId":"-"},"content":"            throw(new Error(data.error));","lastModifiedDate":"2021-01-09"},{"lineNumber":124,"author":{"gitId":"-"},"content":"          }","lastModifiedDate":"2021-01-09"},{"lineNumber":125,"author":{"gitId":"-"},"content":"          this.authService.storeOAuthAccessToken(data.token);","lastModifiedDate":"2021-01-09"},{"lineNumber":126,"author":{"gitId":"-"},"content":"          this.logger.info(\u0027Sucessfully obtained access token\u0027);","lastModifiedDate":"2021-03-14"},{"lineNumber":127,"author":{"gitId":"-"},"content":"        }","lastModifiedDate":"2021-01-09"},{"lineNumber":128,"author":{"gitId":"-"},"content":"      )","lastModifiedDate":"2021-01-09"},{"lineNumber":129,"author":{"gitId":"-"},"content":"      .catch(err \u003d\u003e {","lastModifiedDate":"2021-01-09"},{"lineNumber":130,"author":{"gitId":"-"},"content":"        this.logger.info(`Error in data fetched from access token URL: ${err}`);","lastModifiedDate":"2021-03-14"},{"lineNumber":131,"author":{"gitId":"-"},"content":"        this.errorHandlingService.handleError(err);","lastModifiedDate":"2021-01-09"},{"lineNumber":132,"author":{"gitId":"-"},"content":"        this.authService.changeAuthState(AuthState.NotAuthenticated);","lastModifiedDate":"2021-01-09"},{"lineNumber":133,"author":{"gitId":"-"},"content":"      })","lastModifiedDate":"2021-01-09"},{"lineNumber":134,"author":{"gitId":"-"},"content":"      .finally(() \u003d\u003e {","lastModifiedDate":"2021-01-09"},{"lineNumber":135,"author":{"gitId":"-"},"content":"        if (!(event.source instanceof MessagePort) \u0026\u0026 !(event.source instanceof ServiceWorker)) {","lastModifiedDate":"2021-01-09"},{"lineNumber":136,"author":{"gitId":"-"},"content":"          event.source.postMessage(\u0027close\u0027, AppConfig.origin);","lastModifiedDate":"2021-01-09"},{"lineNumber":137,"author":{"gitId":"-"},"content":"          this.logger.info(\u0027Closing authentication window\u0027);","lastModifiedDate":"2021-03-14"},{"lineNumber":138,"author":{"gitId":"-"},"content":"        }","lastModifiedDate":"2021-01-09"},{"lineNumber":139,"author":{"gitId":"-"},"content":"      });","lastModifiedDate":"2020-02-03"},{"lineNumber":140,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-01-16"},{"lineNumber":141,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-16"},{"lineNumber":142,"author":{"gitId":"-"},"content":"  ngOnDestroy() {","lastModifiedDate":"2019-01-16"},{"lineNumber":143,"author":{"gitId":"-"},"content":"    this.electronService.removeIpcListeners(\u0027github-oauth-reply\u0027);","lastModifiedDate":"2021-01-09"},{"lineNumber":144,"author":{"gitId":"-"},"content":"    if (this.authStateSubscription) {","lastModifiedDate":"2021-01-09"},{"lineNumber":145,"author":{"gitId":"-"},"content":"      this.authStateSubscription.unsubscribe();","lastModifiedDate":"2019-01-16"},{"lineNumber":146,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2019-01-14"},{"lineNumber":147,"author":{"gitId":"-"},"content":"    if (this.accessTokenSubscription) {","lastModifiedDate":"2021-01-09"},{"lineNumber":148,"author":{"gitId":"-"},"content":"      this.accessTokenSubscription.unsubscribe();","lastModifiedDate":"2021-01-09"},{"lineNumber":149,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2021-01-09"},{"lineNumber":150,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2021-01-09"},{"lineNumber":151,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-14"},{"lineNumber":152,"author":{"gitId":"-"},"content":"  /**","lastModifiedDate":"2019-12-17"},{"lineNumber":153,"author":{"gitId":"-"},"content":"   * Checks whether the current version of CATcher is outdated.","lastModifiedDate":"2019-12-17"},{"lineNumber":154,"author":{"gitId":"-"},"content":"   */","lastModifiedDate":"2019-12-17"},{"lineNumber":155,"author":{"gitId":"-"},"content":"  checkAppIsOutdated(): void {","lastModifiedDate":"2019-12-17"},{"lineNumber":156,"author":{"gitId":"-"},"content":"    this.appService.isApplicationOutdated().subscribe((isOutdated: boolean) \u003d\u003e {","lastModifiedDate":"2019-12-17"},{"lineNumber":157,"author":{"gitId":"-"},"content":"      this.isAppOutdated \u003d isOutdated;","lastModifiedDate":"2019-12-17"},{"lineNumber":158,"author":{"gitId":"-"},"content":"      this.isReady \u003d true;","lastModifiedDate":"2019-12-17"},{"lineNumber":159,"author":{"gitId":"-"},"content":"      this.versionCheckingError \u003d false;","lastModifiedDate":"2019-12-17"},{"lineNumber":160,"author":{"gitId":"-"},"content":"    }, (error) \u003d\u003e {","lastModifiedDate":"2019-12-17"},{"lineNumber":161,"author":{"gitId":"-"},"content":"      this.errorHandlingService.handleError(error);","lastModifiedDate":"2020-01-14"},{"lineNumber":162,"author":{"gitId":"-"},"content":"      this.isReady \u003d true;","lastModifiedDate":"2019-12-17"},{"lineNumber":163,"author":{"gitId":"-"},"content":"      this.versionCheckingError \u003d true;","lastModifiedDate":"2019-12-17"},{"lineNumber":164,"author":{"gitId":"-"},"content":"    });","lastModifiedDate":"2019-12-17"},{"lineNumber":165,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-12-17"},{"lineNumber":166,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-12-17"},{"lineNumber":167,"author":{"gitId":"-"},"content":"  /**","lastModifiedDate":"2019-05-23"},{"lineNumber":168,"author":{"gitId":"-"},"content":"   * Fills the login form with data from the given Profile.","lastModifiedDate":"2019-06-06"},{"lineNumber":169,"author":{"gitId":"-"},"content":"   * @param profile - Profile selected by the user.","lastModifiedDate":"2019-06-06"},{"lineNumber":170,"author":{"gitId":"-"},"content":"   */","lastModifiedDate":"2019-05-23"},{"lineNumber":171,"author":{"gitId":"-"},"content":"  onProfileSelect(profile: Profile): void {","lastModifiedDate":"2019-05-23"},{"lineNumber":172,"author":{"gitId":"-"},"content":"    this.profileForm.get(\u0027session\u0027).setValue(profile.encodedText);","lastModifiedDate":"2020-03-04"},{"lineNumber":173,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-05-22"},{"lineNumber":174,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-05-22"},{"lineNumber":175,"author":{"gitId":"-"},"content":"  /**","lastModifiedDate":"2020-03-04"},{"lineNumber":176,"author":{"gitId":"-"},"content":"   * Will complete the process of logging in the given user.","lastModifiedDate":"2020-03-04"},{"lineNumber":177,"author":{"gitId":"-"},"content":"   * @param username - The user to log in.","lastModifiedDate":"2020-03-04"},{"lineNumber":178,"author":{"gitId":"-"},"content":"   */","lastModifiedDate":"2020-03-04"},{"lineNumber":179,"author":{"gitId":"-"},"content":"  completeLoginProcess(username: string): void {","lastModifiedDate":"2020-03-04"},{"lineNumber":180,"author":{"gitId":"-"},"content":"    this.authService.changeAuthState(AuthState.AwaitingAuthentication);","lastModifiedDate":"2021-01-09"},{"lineNumber":181,"author":{"gitId":"-"},"content":"    this.phaseService.setPhaseOwners(this.currentSessionOrg, username);","lastModifiedDate":"2020-03-04"},{"lineNumber":182,"author":{"gitId":"-"},"content":"    this.userService.createUserModel(username).pipe(","lastModifiedDate":"2020-03-04"},{"lineNumber":183,"author":{"gitId":"-"},"content":"      flatMap(() \u003d\u003e this.phaseService.sessionSetup()),","lastModifiedDate":"2020-10-15"},{"lineNumber":184,"author":{"gitId":"-"},"content":"      flatMap(() \u003d\u003e this.githubEventService.setLatestChangeEvent()),","lastModifiedDate":"2020-10-15"},{"lineNumber":185,"author":{"gitId":"-"},"content":"    ).subscribe(() \u003d\u003e {","lastModifiedDate":"2020-03-04"},{"lineNumber":186,"author":{"gitId":"-"},"content":"      this.handleAuthSuccess();","lastModifiedDate":"2020-03-04"},{"lineNumber":187,"author":{"gitId":"-"},"content":"    }, (error) \u003d\u003e {","lastModifiedDate":"2020-03-04"},{"lineNumber":188,"author":{"gitId":"-"},"content":"      this.authService.changeAuthState(AuthState.NotAuthenticated);","lastModifiedDate":"2021-01-09"},{"lineNumber":189,"author":{"gitId":"-"},"content":"      this.errorHandlingService.handleError(error);","lastModifiedDate":"2020-01-14"},{"lineNumber":190,"author":{"gitId":"-"},"content":"      this.logger.info(`Completion of login process failed with an error: ${error}`);","lastModifiedDate":"2021-03-14"},{"lineNumber":191,"author":{"gitId":"-"},"content":"    });","lastModifiedDate":"2020-03-04"},{"lineNumber":192,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-01-29"},{"lineNumber":193,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-02-03"},{"lineNumber":194,"author":{"gitId":"-"},"content":"  setupSession() {","lastModifiedDate":"2020-03-04"},{"lineNumber":195,"author":{"gitId":"-"},"content":"    if (this.profileForm.invalid) {","lastModifiedDate":"2020-02-03"},{"lineNumber":196,"author":{"gitId":"-"},"content":"      return;","lastModifiedDate":"2020-02-03"},{"lineNumber":197,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2020-02-03"},{"lineNumber":198,"author":{"gitId":"-"},"content":"    this.isSettingUpSession \u003d true;","lastModifiedDate":"2020-03-04"},{"lineNumber":199,"author":{"gitId":"-"},"content":"    const sessionInformation: string \u003d this.profileForm.get(\u0027session\u0027).value;","lastModifiedDate":"2020-02-03"},{"lineNumber":200,"author":{"gitId":"-"},"content":"    const org: string \u003d this.getOrgDetails(sessionInformation);","lastModifiedDate":"2020-02-03"},{"lineNumber":201,"author":{"gitId":"-"},"content":"    const dataRepo: string \u003d this.getDataRepoDetails(sessionInformation);","lastModifiedDate":"2020-02-03"},{"lineNumber":202,"author":{"gitId":"-"},"content":"    this.githubService.storeOrganizationDetails(org, dataRepo);","lastModifiedDate":"2020-02-03"},{"lineNumber":203,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-02-03"},{"lineNumber":204,"author":{"gitId":"zatkiller"},"content":"    this.logger.info(`Selected Settings Repo: ${sessionInformation}`);","lastModifiedDate":"2021-06-26"},{"lineNumber":205,"author":{"gitId":"zatkiller"},"content":"","lastModifiedDate":"2021-06-26"},{"lineNumber":206,"author":{"gitId":"zatkiller"},"content":"    this.phaseService.storeSessionData().subscribe(() \u003d\u003e {","lastModifiedDate":"2021-07-04"},{"lineNumber":207,"author":{"gitId":"zatkiller"},"content":"","lastModifiedDate":"2021-07-04"},{"lineNumber":208,"author":{"gitId":"-"},"content":"      try {","lastModifiedDate":"2021-03-14"},{"lineNumber":209,"author":{"gitId":"-"},"content":"        this.authService.startOAuthProcess();","lastModifiedDate":"2021-01-09"},{"lineNumber":210,"author":{"gitId":"-"},"content":"      } catch (error) {","lastModifiedDate":"2021-03-14"},{"lineNumber":211,"author":{"gitId":"-"},"content":"        this.errorHandlingService.handleError(error);","lastModifiedDate":"2021-03-14"},{"lineNumber":212,"author":{"gitId":"-"},"content":"        this.authService.changeAuthState(AuthState.NotAuthenticated);","lastModifiedDate":"2021-03-14"},{"lineNumber":213,"author":{"gitId":"-"},"content":"      }","lastModifiedDate":"2021-03-14"},{"lineNumber":214,"author":{"gitId":"-"},"content":"    }, (error) \u003d\u003e {","lastModifiedDate":"2020-02-03"},{"lineNumber":215,"author":{"gitId":"-"},"content":"      this.errorHandlingService.handleError(error);","lastModifiedDate":"2020-02-03"},{"lineNumber":216,"author":{"gitId":"-"},"content":"      this.isSettingUpSession \u003d false;","lastModifiedDate":"2020-03-12"},{"lineNumber":217,"author":{"gitId":"-"},"content":"    }, () \u003d\u003e this.isSettingUpSession \u003d false);","lastModifiedDate":"2020-08-30"},{"lineNumber":218,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-02-03"},{"lineNumber":219,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-02-03"},{"lineNumber":220,"author":{"gitId":"-"},"content":"  logIntoAnotherAccount() {","lastModifiedDate":"2020-03-04"},{"lineNumber":221,"author":{"gitId":"-"},"content":"    this.logger.info(\u0027Logging into another account\u0027);","lastModifiedDate":"2021-03-14"},{"lineNumber":222,"author":{"gitId":"-"},"content":"    this.electronService.clearCookies();","lastModifiedDate":"2021-01-09"},{"lineNumber":223,"author":{"gitId":"-"},"content":"    this.authService.startOAuthProcess();","lastModifiedDate":"2021-01-09"},{"lineNumber":224,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2021-01-09"},{"lineNumber":225,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2021-01-09"},{"lineNumber":226,"author":{"gitId":"-"},"content":"  onGithubWebsiteClicked() {","lastModifiedDate":"2021-01-09"},{"lineNumber":227,"author":{"gitId":"-"},"content":"    window.open(\u0027https://github.com/\u0027, \u0027_blank\u0027);","lastModifiedDate":"2021-01-09"},{"lineNumber":228,"author":{"gitId":"-"},"content":"    window.location.reload();","lastModifiedDate":"2021-01-09"},{"lineNumber":229,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-03-04"},{"lineNumber":230,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-03-04"},{"lineNumber":231,"author":{"gitId":"-"},"content":"  /**","lastModifiedDate":"2020-02-03"},{"lineNumber":232,"author":{"gitId":"-"},"content":"   * Handles the clean up required after authentication and setting up of user data is completed.","lastModifiedDate":"2020-02-03"},{"lineNumber":233,"author":{"gitId":"-"},"content":"   */","lastModifiedDate":"2020-02-03"},{"lineNumber":234,"author":{"gitId":"-"},"content":"  handleAuthSuccess() {","lastModifiedDate":"2020-03-04"},{"lineNumber":235,"author":{"gitId":"-"},"content":"    this.authService.setTitleWithPhaseDetail();","lastModifiedDate":"2021-02-05"},{"lineNumber":236,"author":{"gitId":"-"},"content":"    this.router.navigateByUrl(this.phaseService.currentPhase);","lastModifiedDate":"2020-02-03"},{"lineNumber":237,"author":{"gitId":"-"},"content":"    this.authService.changeAuthState(AuthState.Authenticated);","lastModifiedDate":"2020-02-03"},{"lineNumber":238,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-01-22"},{"lineNumber":239,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-07-10"},{"lineNumber":240,"author":{"gitId":"-"},"content":"  goToSessionSelect() {","lastModifiedDate":"2020-03-04"},{"lineNumber":241,"author":{"gitId":"-"},"content":"    this.authService.changeAuthState(AuthState.NotAuthenticated);","lastModifiedDate":"2020-08-30"},{"lineNumber":242,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-02-03"},{"lineNumber":243,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-02-03"},{"lineNumber":244,"author":{"gitId":"-"},"content":"  isUserNotAuthenticated(): boolean {","lastModifiedDate":"2020-02-03"},{"lineNumber":245,"author":{"gitId":"-"},"content":"    return this.authState \u003d\u003d\u003d AuthState.NotAuthenticated;","lastModifiedDate":"2019-10-01"},{"lineNumber":246,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-10-01"},{"lineNumber":247,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-10-01"},{"lineNumber":248,"author":{"gitId":"-"},"content":"  isUserAuthenticating(): boolean {","lastModifiedDate":"2020-02-03"},{"lineNumber":249,"author":{"gitId":"-"},"content":"    return this.authState \u003d\u003d\u003d AuthState.AwaitingAuthentication;","lastModifiedDate":"2020-02-03"},{"lineNumber":250,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-02-03"},{"lineNumber":251,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-02-03"},{"lineNumber":252,"author":{"gitId":"-"},"content":"  isAwaitingOAuthUserConfirm(): boolean {","lastModifiedDate":"2020-08-30"},{"lineNumber":253,"author":{"gitId":"-"},"content":"    return this.authState \u003d\u003d\u003d AuthState.ConfirmOAuthUser;","lastModifiedDate":"2020-08-30"},{"lineNumber":254,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-08-30"},{"lineNumber":255,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-08-30"},{"lineNumber":256,"author":{"gitId":"-"},"content":"  get currentSessionOrg(): string {","lastModifiedDate":"2020-03-04"},{"lineNumber":257,"author":{"gitId":"-"},"content":"    const sessionInformation: string \u003d this.profileForm.get(\u0027session\u0027).value;","lastModifiedDate":"2020-03-04"},{"lineNumber":258,"author":{"gitId":"-"},"content":"    return this.getOrgDetails(sessionInformation);","lastModifiedDate":"2020-03-04"},{"lineNumber":259,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-02-03"},{"lineNumber":260,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-02-03"},{"lineNumber":261,"author":{"gitId":"-"},"content":"  /**","lastModifiedDate":"2021-01-09"},{"lineNumber":262,"author":{"gitId":"-"},"content":"   * Will wait for the message from parent window to close the window.","lastModifiedDate":"2021-01-09"},{"lineNumber":263,"author":{"gitId":"-"},"content":"   */","lastModifiedDate":"2021-01-09"},{"lineNumber":264,"author":{"gitId":"-"},"content":"  private listenForCloseOAuthWindowMessage() {","lastModifiedDate":"2021-01-09"},{"lineNumber":265,"author":{"gitId":"-"},"content":"    window.addEventListener(\u0027message\u0027, (event) \u003d\u003e {","lastModifiedDate":"2021-01-09"},{"lineNumber":266,"author":{"gitId":"-"},"content":"      if (event.origin !\u003d\u003d AppConfig.origin) {","lastModifiedDate":"2021-01-09"},{"lineNumber":267,"author":{"gitId":"-"},"content":"        return;","lastModifiedDate":"2021-01-09"},{"lineNumber":268,"author":{"gitId":"-"},"content":"      }","lastModifiedDate":"2021-01-09"},{"lineNumber":269,"author":{"gitId":"-"},"content":"      if (event.data \u003d\u003d\u003d \u0027close\u0027) {","lastModifiedDate":"2021-01-09"},{"lineNumber":270,"author":{"gitId":"-"},"content":"        window.opener.focus();","lastModifiedDate":"2021-01-09"},{"lineNumber":271,"author":{"gitId":"-"},"content":"        window.close();","lastModifiedDate":"2021-01-09"},{"lineNumber":272,"author":{"gitId":"-"},"content":"        this.logger.info(\u0027Closed authentication window\u0027);","lastModifiedDate":"2021-03-14"},{"lineNumber":273,"author":{"gitId":"-"},"content":"      }","lastModifiedDate":"2021-01-09"},{"lineNumber":274,"author":{"gitId":"-"},"content":"    });","lastModifiedDate":"2021-01-09"},{"lineNumber":275,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2021-01-09"},{"lineNumber":276,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2021-01-09"},{"lineNumber":277,"author":{"gitId":"-"},"content":"  /**","lastModifiedDate":"2019-07-10"},{"lineNumber":278,"author":{"gitId":"-"},"content":"   * Extracts the Organization Details from the input sessionInformation.","lastModifiedDate":"2019-07-10"},{"lineNumber":279,"author":{"gitId":"-"},"content":"   * @param sessionInformation - string in the format of \u0027orgName/dataRepo\u0027","lastModifiedDate":"2019-07-10"},{"lineNumber":280,"author":{"gitId":"-"},"content":"   */","lastModifiedDate":"2019-07-10"},{"lineNumber":281,"author":{"gitId":"-"},"content":"  private getOrgDetails(sessionInformation: string) {","lastModifiedDate":"2019-07-10"},{"lineNumber":282,"author":{"gitId":"-"},"content":"    return sessionInformation.split(\u0027/\u0027)[0];","lastModifiedDate":"2019-07-10"},{"lineNumber":283,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-07-10"},{"lineNumber":284,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-07-10"},{"lineNumber":285,"author":{"gitId":"-"},"content":"  /**","lastModifiedDate":"2019-07-10"},{"lineNumber":286,"author":{"gitId":"-"},"content":"   * Extracts the Data Repository Details from the input sessionInformation.","lastModifiedDate":"2019-07-10"},{"lineNumber":287,"author":{"gitId":"-"},"content":"   * @param sessionInformation - string in the format of \u0027orgName/dataRepo\u0027","lastModifiedDate":"2019-07-10"},{"lineNumber":288,"author":{"gitId":"-"},"content":"   */","lastModifiedDate":"2019-07-10"},{"lineNumber":289,"author":{"gitId":"-"},"content":"  private getDataRepoDetails(sessionInformation: string) {","lastModifiedDate":"2019-07-10"},{"lineNumber":290,"author":{"gitId":"-"},"content":"    return sessionInformation.split(\u0027/\u0027)[1];","lastModifiedDate":"2019-07-10"},{"lineNumber":291,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-07-10"},{"lineNumber":292,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2021-01-09"},{"lineNumber":293,"author":{"gitId":"-"},"content":"  private initProfileForm() {","lastModifiedDate":"2021-01-09"},{"lineNumber":294,"author":{"gitId":"-"},"content":"    this.profileForm \u003d this.formBuilder.group({","lastModifiedDate":"2021-01-09"},{"lineNumber":295,"author":{"gitId":"-"},"content":"      session: [\u0027\u0027, Validators.required],","lastModifiedDate":"2021-01-09"},{"lineNumber":296,"author":{"gitId":"-"},"content":"    });","lastModifiedDate":"2021-01-09"},{"lineNumber":297,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2021-01-09"},{"lineNumber":298,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2021-01-09"},{"lineNumber":299,"author":{"gitId":"-"},"content":"  private initAuthStateSubscription() {","lastModifiedDate":"2021-01-09"},{"lineNumber":300,"author":{"gitId":"-"},"content":"    this.authStateSubscription \u003d this.authService.currentAuthState.subscribe((state) \u003d\u003e {","lastModifiedDate":"2021-01-09"},{"lineNumber":301,"author":{"gitId":"-"},"content":"      this.ngZone.run(() \u003d\u003e {","lastModifiedDate":"2021-01-09"},{"lineNumber":302,"author":{"gitId":"-"},"content":"        this.authState \u003d state;","lastModifiedDate":"2021-01-09"},{"lineNumber":303,"author":{"gitId":"-"},"content":"      });","lastModifiedDate":"2021-01-09"},{"lineNumber":304,"author":{"gitId":"-"},"content":"    });","lastModifiedDate":"2021-01-09"},{"lineNumber":305,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2021-01-09"},{"lineNumber":306,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2021-01-09"},{"lineNumber":307,"author":{"gitId":"-"},"content":"  private initAccessTokenSubscription() {","lastModifiedDate":"2021-01-09"},{"lineNumber":308,"author":{"gitId":"-"},"content":"    this.accessTokenSubscription \u003d this.authService.accessToken.pipe(","lastModifiedDate":"2021-01-09"},{"lineNumber":309,"author":{"gitId":"-"},"content":"      filter((token: string) \u003d\u003e !!token),","lastModifiedDate":"2021-01-09"},{"lineNumber":310,"author":{"gitId":"-"},"content":"      flatMap(() \u003d\u003e this.userService.getAuthenticatedUser())","lastModifiedDate":"2021-01-09"},{"lineNumber":311,"author":{"gitId":"-"},"content":"    ).subscribe((user: GithubUser) \u003d\u003e {","lastModifiedDate":"2021-01-09"},{"lineNumber":312,"author":{"gitId":"-"},"content":"      this.ngZone.run(() \u003d\u003e {","lastModifiedDate":"2021-01-09"},{"lineNumber":313,"author":{"gitId":"-"},"content":"        this.currentUserName \u003d user.login;","lastModifiedDate":"2021-01-09"},{"lineNumber":314,"author":{"gitId":"-"},"content":"        this.authService.changeAuthState(AuthState.ConfirmOAuthUser);","lastModifiedDate":"2021-01-09"},{"lineNumber":315,"author":{"gitId":"-"},"content":"      });","lastModifiedDate":"2021-01-09"},{"lineNumber":316,"author":{"gitId":"-"},"content":"    });","lastModifiedDate":"2021-01-09"},{"lineNumber":317,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2021-01-09"},{"lineNumber":318,"author":{"gitId":"-"},"content":"}","lastModifiedDate":"2019-01-14"}],"authorContributionMap":{"zatkiller":4,"-":314}},{"path":"src/app/core/models/issue.model.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Team } from \u0027./team.model\u0027;","lastModifiedDate":"2019-03-19"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { TesterResponse } from \u0027./tester-response.model\u0027;","lastModifiedDate":"2019-07-20"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { IssueComment } from \u0027./comment.model\u0027;","lastModifiedDate":"2019-09-25"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { IssueDispute } from \u0027./issue-dispute.model\u0027;","lastModifiedDate":"2019-08-02"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import { GithubIssue } from \u0027./github/github-issue.model\u0027;","lastModifiedDate":"2020-09-12"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import { GithubLabel } from \u0027./github/github-label.model\u0027;","lastModifiedDate":"2020-09-12"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import { GithubComment } from \u0027./github/github-comment.model\u0027;","lastModifiedDate":"2020-01-14"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import { TeamResponseTemplate } from \u0027./templates/team-response-template.model\u0027;","lastModifiedDate":"2019-12-17"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import { TesterResponseTemplate } from \u0027./templates/tester-response-template.model\u0027;","lastModifiedDate":"2019-12-17"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import { TutorModerationIssueTemplate } from \u0027./templates/tutor-moderation-issue-template.model\u0027;","lastModifiedDate":"2019-12-17"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import { TutorModerationTodoTemplate } from \u0027./templates/tutor-moderation-todo-template.model\u0027;","lastModifiedDate":"2019-12-17"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import { Phase } from \u0027../models/phase.model\u0027;","lastModifiedDate":"2021-02-08"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import * as moment from \u0027moment\u0027;","lastModifiedDate":"2019-12-17"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import { HiddenData } from \u0027./hidden-data.model\u0027;","lastModifiedDate":"2020-09-27"},{"lineNumber":15,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-03-19"},{"lineNumber":16,"author":{"gitId":"-"},"content":"export class Issue {","lastModifiedDate":"2019-12-17"},{"lineNumber":17,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-12-17"},{"lineNumber":18,"author":{"gitId":"-"},"content":"  /** Basic Fields */","lastModifiedDate":"2019-12-17"},{"lineNumber":19,"author":{"gitId":"-"},"content":"  readonly globalId: string;","lastModifiedDate":"2020-09-12"},{"lineNumber":20,"author":{"gitId":"-"},"content":"  readonly id: number;","lastModifiedDate":"2019-02-16"},{"lineNumber":21,"author":{"gitId":"-"},"content":"  readonly created_at: string;","lastModifiedDate":"2019-02-16"},{"lineNumber":22,"author":{"gitId":"-"},"content":"  readonly githubIssue: GithubIssue;","lastModifiedDate":"2020-01-14"},{"lineNumber":23,"author":{"gitId":"-"},"content":"  githubComments: GithubComment[];","lastModifiedDate":"2020-01-14"},{"lineNumber":24,"author":{"gitId":"-"},"content":"  title: string;","lastModifiedDate":"2019-01-18"},{"lineNumber":25,"author":{"gitId":"-"},"content":"  description: string;","lastModifiedDate":"2019-12-17"},{"lineNumber":26,"author":{"gitId":"-"},"content":"  hiddenDataInDescription: HiddenData;","lastModifiedDate":"2020-09-27"},{"lineNumber":27,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-12-17"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  /** Fields derived from Labels */","lastModifiedDate":"2019-12-17"},{"lineNumber":29,"author":{"gitId":"-"},"content":"  severity: string;","lastModifiedDate":"2019-01-18"},{"lineNumber":30,"author":{"gitId":"-"},"content":"  type: string;","lastModifiedDate":"2019-12-17"},{"lineNumber":31,"author":{"gitId":"-"},"content":"  responseTag?: string;","lastModifiedDate":"2019-02-16"},{"lineNumber":32,"author":{"gitId":"-"},"content":"  duplicated?: boolean;","lastModifiedDate":"2019-02-20"},{"lineNumber":33,"author":{"gitId":"-"},"content":"  status?: string;","lastModifiedDate":"2019-04-05"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  pending?: string;","lastModifiedDate":"2019-12-17"},{"lineNumber":35,"author":{"gitId":"-"},"content":"  unsure?: boolean;","lastModifiedDate":"2019-12-17"},{"lineNumber":36,"author":{"gitId":"-"},"content":"  teamAssigned?: Team;","lastModifiedDate":"2019-03-19"},{"lineNumber":37,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-12-17"},{"lineNumber":38,"author":{"gitId":"-"},"content":"  /** Depending on the phase, assignees attribute can be derived from Github\u0027s assignee feature OR from the Github\u0027s issue description */","lastModifiedDate":"2019-12-17"},{"lineNumber":39,"author":{"gitId":"-"},"content":"  assignees?: string[];","lastModifiedDate":"2019-12-17"},{"lineNumber":40,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-12-17"},{"lineNumber":41,"author":{"gitId":"-"},"content":"  /** Fields derived from parsing of Github\u0027s issue description */","lastModifiedDate":"2019-12-17"},{"lineNumber":42,"author":{"gitId":"-"},"content":"  duplicateOf?: number;","lastModifiedDate":"2019-12-17"},{"lineNumber":43,"author":{"gitId":"-"},"content":"  teamResponse?: string;","lastModifiedDate":"2019-05-20"},{"lineNumber":44,"author":{"gitId":"-"},"content":"  testerResponses?: TesterResponse[];","lastModifiedDate":"2019-07-20"},{"lineNumber":45,"author":{"gitId":"-"},"content":"  issueComment?: IssueComment; // Issue comment is used for Tutor Response and Tester Response","lastModifiedDate":"2019-08-02"},{"lineNumber":46,"author":{"gitId":"-"},"content":"  issueDisputes?: IssueDispute[];","lastModifiedDate":"2019-08-02"},{"lineNumber":47,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-12-17"},{"lineNumber":48,"author":{"gitId":"-"},"content":"  /**","lastModifiedDate":"2020-10-24"},{"lineNumber":49,"author":{"gitId":"-"},"content":"   * Formats the text to create space at the end of the user input to prevent any issues with","lastModifiedDate":"2020-10-24"},{"lineNumber":50,"author":{"gitId":"-"},"content":"   * the markdown interpretation.","lastModifiedDate":"2020-10-24"},{"lineNumber":51,"author":{"gitId":"-"},"content":"   *","lastModifiedDate":"2020-10-24"},{"lineNumber":52,"author":{"gitId":"-"},"content":"   * Brought over from comment-editor.component.ts","lastModifiedDate":"2020-10-24"},{"lineNumber":53,"author":{"gitId":"-"},"content":"   */","lastModifiedDate":"2020-10-24"},{"lineNumber":54,"author":{"gitId":"-"},"content":"  static formatText(text: string): string {","lastModifiedDate":"2020-10-24"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    if (text \u003d\u003d\u003d null) {","lastModifiedDate":"2020-10-24"},{"lineNumber":56,"author":{"gitId":"-"},"content":"      return null;","lastModifiedDate":"2020-10-24"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2020-10-24"},{"lineNumber":58,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-10-24"},{"lineNumber":59,"author":{"gitId":"-"},"content":"    if (text \u003d\u003d\u003d undefined) {","lastModifiedDate":"2020-10-24"},{"lineNumber":60,"author":{"gitId":"-"},"content":"      return undefined;","lastModifiedDate":"2020-10-24"},{"lineNumber":61,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2020-10-24"},{"lineNumber":62,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-10-24"},{"lineNumber":63,"author":{"gitId":"-"},"content":"    const newLinesRegex \u003d /[\\n\\r]/gi;","lastModifiedDate":"2020-10-24"},{"lineNumber":64,"author":{"gitId":"-"},"content":"    const textSplitArray \u003d text.split(newLinesRegex);","lastModifiedDate":"2020-10-24"},{"lineNumber":65,"author":{"gitId":"-"},"content":"    if (textSplitArray.filter(split \u003d\u003e split.trim() !\u003d\u003d \u0027\u0027).length \u003e 0) {","lastModifiedDate":"2020-10-24"},{"lineNumber":66,"author":{"gitId":"-"},"content":"      return `${text}\\n\\n`;","lastModifiedDate":"2020-10-24"},{"lineNumber":67,"author":{"gitId":"-"},"content":"    } else {","lastModifiedDate":"2020-10-24"},{"lineNumber":68,"author":{"gitId":"-"},"content":"      return text;","lastModifiedDate":"2020-10-24"},{"lineNumber":69,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2020-10-24"},{"lineNumber":70,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-10-24"},{"lineNumber":71,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-10-24"},{"lineNumber":72,"author":{"gitId":"-"},"content":"  /**","lastModifiedDate":"2020-02-28"},{"lineNumber":73,"author":{"gitId":"-"},"content":"   * Processes and cleans a raw issue description obtained from user input.","lastModifiedDate":"2020-02-28"},{"lineNumber":74,"author":{"gitId":"-"},"content":"   */","lastModifiedDate":"2020-02-28"},{"lineNumber":75,"author":{"gitId":"-"},"content":"  static updateDescription(description: string): string {","lastModifiedDate":"2020-02-28"},{"lineNumber":76,"author":{"gitId":"-"},"content":"    const defaultString \u003d \u0027No details provided by bug reporter.\u0027;","lastModifiedDate":"2020-03-02"},{"lineNumber":77,"author":{"gitId":"-"},"content":"    return Issue.orDefaultString(Issue.formatText(description), defaultString);","lastModifiedDate":"2020-10-24"},{"lineNumber":78,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-02-28"},{"lineNumber":79,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-02-28"},{"lineNumber":80,"author":{"gitId":"-"},"content":"  /**","lastModifiedDate":"2020-02-28"},{"lineNumber":81,"author":{"gitId":"-"},"content":"   * Processes and cleans a raw team response obtained from user input.","lastModifiedDate":"2020-02-28"},{"lineNumber":82,"author":{"gitId":"-"},"content":"   */","lastModifiedDate":"2020-02-28"},{"lineNumber":83,"author":{"gitId":"-"},"content":"  static updateTeamResponse(teamResponse: string): string {","lastModifiedDate":"2020-02-28"},{"lineNumber":84,"author":{"gitId":"-"},"content":"    const defaultString \u003d \u0027No details provided by team.\u0027;","lastModifiedDate":"2020-03-02"},{"lineNumber":85,"author":{"gitId":"-"},"content":"    return Issue.orDefaultString(Issue.formatText(teamResponse), defaultString);","lastModifiedDate":"2020-10-24"},{"lineNumber":86,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-02-28"},{"lineNumber":87,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-02-28"},{"lineNumber":88,"author":{"gitId":"-"},"content":"  /**","lastModifiedDate":"2020-02-28"},{"lineNumber":89,"author":{"gitId":"-"},"content":"   * Given two strings, returns the first if it is not an empty string or a false value such as null/undefined.","lastModifiedDate":"2020-03-02"},{"lineNumber":90,"author":{"gitId":"-"},"content":"   * Returns the second string if the first is an empty string.","lastModifiedDate":"2020-02-28"},{"lineNumber":91,"author":{"gitId":"-"},"content":"   */","lastModifiedDate":"2020-02-28"},{"lineNumber":92,"author":{"gitId":"-"},"content":"  private static orDefaultString(stringA: string, def: string): string {","lastModifiedDate":"2020-02-28"},{"lineNumber":93,"author":{"gitId":"-"},"content":"    if (!stringA) {","lastModifiedDate":"2020-03-02"},{"lineNumber":94,"author":{"gitId":"-"},"content":"      return def;","lastModifiedDate":"2020-03-02"},{"lineNumber":95,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2020-03-02"},{"lineNumber":96,"author":{"gitId":"-"},"content":"    return stringA.length !\u003d\u003d 0 ? stringA : def;","lastModifiedDate":"2020-02-28"},{"lineNumber":97,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-02-28"},{"lineNumber":98,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-02-28"},{"lineNumber":99,"author":{"gitId":"-"},"content":"  protected constructor(githubIssue: GithubIssue) {","lastModifiedDate":"2019-12-17"},{"lineNumber":100,"author":{"gitId":"-"},"content":"    /** Basic Fields */","lastModifiedDate":"2019-12-17"},{"lineNumber":101,"author":{"gitId":"-"},"content":"    this.globalId \u003d githubIssue.id;","lastModifiedDate":"2020-09-12"},{"lineNumber":102,"author":{"gitId":"-"},"content":"    this.id \u003d +githubIssue.number;","lastModifiedDate":"2019-12-17"},{"lineNumber":103,"author":{"gitId":"-"},"content":"    this.created_at \u003d moment(githubIssue.created_at).format(\u0027lll\u0027);","lastModifiedDate":"2019-12-17"},{"lineNumber":104,"author":{"gitId":"-"},"content":"    this.title \u003d githubIssue.title;","lastModifiedDate":"2019-12-17"},{"lineNumber":105,"author":{"gitId":"-"},"content":"    this.hiddenDataInDescription \u003d new HiddenData(githubIssue.body);","lastModifiedDate":"2020-09-27"},{"lineNumber":106,"author":{"gitId":"-"},"content":"    this.description \u003d Issue.updateDescription(this.hiddenDataInDescription.originalStringWithoutHiddenData);","lastModifiedDate":"2020-09-27"},{"lineNumber":107,"author":{"gitId":"-"},"content":"    this.githubIssue \u003d githubIssue;","lastModifiedDate":"2020-01-14"},{"lineNumber":108,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-12-17"},{"lineNumber":109,"author":{"gitId":"-"},"content":"    /** Fields derived from Labels */","lastModifiedDate":"2019-12-17"},{"lineNumber":110,"author":{"gitId":"-"},"content":"    this.severity \u003d githubIssue.findLabel(GithubLabel.LABELS.severity);","lastModifiedDate":"2019-12-17"},{"lineNumber":111,"author":{"gitId":"-"},"content":"    this.type \u003d githubIssue.findLabel(GithubLabel.LABELS.type);","lastModifiedDate":"2019-12-17"},{"lineNumber":112,"author":{"gitId":"-"},"content":"    this.responseTag \u003d githubIssue.findLabel(GithubLabel.LABELS.response);","lastModifiedDate":"2019-12-17"},{"lineNumber":113,"author":{"gitId":"-"},"content":"    this.duplicated \u003d !!githubIssue.findLabel(GithubLabel.LABELS.duplicated, false);","lastModifiedDate":"2019-12-17"},{"lineNumber":114,"author":{"gitId":"-"},"content":"    this.status \u003d githubIssue.findLabel(GithubLabel.LABELS.status);","lastModifiedDate":"2019-12-17"},{"lineNumber":115,"author":{"gitId":"-"},"content":"    this.pending \u003d githubIssue.findLabel(GithubLabel.LABELS.pending);","lastModifiedDate":"2019-12-17"},{"lineNumber":116,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-12-17"},{"lineNumber":117,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-12-17"},{"lineNumber":118,"author":{"gitId":"-"},"content":"  public static createPhaseBugReportingIssue(githubIssue: GithubIssue): Issue {","lastModifiedDate":"2019-12-17"},{"lineNumber":119,"author":{"gitId":"-"},"content":"    return new Issue(githubIssue);","lastModifiedDate":"2019-12-17"},{"lineNumber":120,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-12-17"},{"lineNumber":121,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-12-17"},{"lineNumber":122,"author":{"gitId":"-"},"content":"  public static createPhaseTeamResponseIssue(githubIssue: GithubIssue, teamData: Team): Issue {","lastModifiedDate":"2020-09-12"},{"lineNumber":123,"author":{"gitId":"-"},"content":"    const issue \u003d new Issue(githubIssue);","lastModifiedDate":"2019-12-17"},{"lineNumber":124,"author":{"gitId":"-"},"content":"    const template \u003d new TeamResponseTemplate(githubIssue.comments);","lastModifiedDate":"2020-09-12"},{"lineNumber":125,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-12-17"},{"lineNumber":126,"author":{"gitId":"-"},"content":"    issue.githubComments \u003d githubIssue.comments;","lastModifiedDate":"2020-09-12"},{"lineNumber":127,"author":{"gitId":"-"},"content":"    issue.teamAssigned \u003d teamData;","lastModifiedDate":"2019-12-17"},{"lineNumber":128,"author":{"gitId":"-"},"content":"    issue.issueComment \u003d template.comment;","lastModifiedDate":"2019-12-17"},{"lineNumber":129,"author":{"gitId":"AudreyFelicio"},"content":"    issue.teamResponse \u003d template.teamResponse \u0026\u0026 Issue.updateTeamResponse(template.teamResponse.content);","lastModifiedDate":"2021-06-30"},{"lineNumber":130,"author":{"gitId":"AudreyFelicio"},"content":"    issue.duplicateOf \u003d template.duplicateOf \u0026\u0026 template.duplicateOf.issueNumber;","lastModifiedDate":"2021-06-30"},{"lineNumber":131,"author":{"gitId":"-"},"content":"    issue.duplicated \u003d issue.duplicateOf !\u003d\u003d undefined \u0026\u0026 issue.duplicateOf !\u003d\u003d null;","lastModifiedDate":"2019-12-17"},{"lineNumber":132,"author":{"gitId":"-"},"content":"    issue.assignees \u003d githubIssue.assignees.map(assignee \u003d\u003e assignee.login);","lastModifiedDate":"2019-12-17"},{"lineNumber":133,"author":{"gitId":"-"},"content":"    return issue;","lastModifiedDate":"2019-12-17"},{"lineNumber":134,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-12-17"},{"lineNumber":135,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-12-17"},{"lineNumber":136,"author":{"gitId":"-"},"content":"  public static createPhaseTesterResponseIssue(githubIssue: GithubIssue): Issue {","lastModifiedDate":"2020-09-12"},{"lineNumber":137,"author":{"gitId":"-"},"content":"    const issue \u003d new Issue(githubIssue);","lastModifiedDate":"2019-12-17"},{"lineNumber":138,"author":{"gitId":"-"},"content":"    const template \u003d new TesterResponseTemplate(githubIssue.comments);","lastModifiedDate":"2020-09-12"},{"lineNumber":139,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":140,"author":{"gitId":"-"},"content":"    issue.githubComments \u003d githubIssue.comments;","lastModifiedDate":"2020-09-12"},{"lineNumber":141,"author":{"gitId":"-"},"content":"    issue.issueComment \u003d template.comment;","lastModifiedDate":"2019-12-17"},{"lineNumber":142,"author":{"gitId":"AudreyFelicio"},"content":"    issue.teamResponse \u003d template.teamResponse \u0026\u0026 Issue.updateTeamResponse(template.teamResponse.content);","lastModifiedDate":"2021-06-30"},{"lineNumber":143,"author":{"gitId":"AudreyFelicio"},"content":"    issue.testerResponses \u003d template.testerResponse \u0026\u0026 template.testerResponse.testerResponses;","lastModifiedDate":"2021-06-30"},{"lineNumber":144,"author":{"gitId":"-"},"content":"    return issue;","lastModifiedDate":"2019-12-17"},{"lineNumber":145,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-12-17"},{"lineNumber":146,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-12-17"},{"lineNumber":147,"author":{"gitId":"-"},"content":"  public static createPhaseModerationIssue(githubIssue: GithubIssue, teamData: Team): Issue {","lastModifiedDate":"2020-09-12"},{"lineNumber":148,"author":{"gitId":"-"},"content":"    const issue \u003d new Issue(githubIssue);","lastModifiedDate":"2019-12-17"},{"lineNumber":149,"author":{"gitId":"-"},"content":"    const issueTemplate \u003d new TutorModerationIssueTemplate(githubIssue);","lastModifiedDate":"2019-12-17"},{"lineNumber":150,"author":{"gitId":"-"},"content":"    const todoTemplate \u003d new TutorModerationTodoTemplate(githubIssue.comments);","lastModifiedDate":"2020-09-12"},{"lineNumber":151,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-12-17"},{"lineNumber":152,"author":{"gitId":"-"},"content":"    issue.githubComments \u003d githubIssue.comments;","lastModifiedDate":"2020-09-12"},{"lineNumber":153,"author":{"gitId":"-"},"content":"    issue.teamAssigned \u003d teamData;","lastModifiedDate":"2019-12-17"},{"lineNumber":154,"author":{"gitId":"-"},"content":"    issue.description \u003d issueTemplate.description.content;","lastModifiedDate":"2019-12-17"},{"lineNumber":155,"author":{"gitId":"AudreyFelicio"},"content":"    issue.teamResponse \u003d issueTemplate.teamResponse \u0026\u0026 Issue.updateTeamResponse(issueTemplate.teamResponse.content);","lastModifiedDate":"2021-06-30"},{"lineNumber":156,"author":{"gitId":"-"},"content":"    issue.issueDisputes \u003d issueTemplate.dispute.disputes;","lastModifiedDate":"2019-12-17"},{"lineNumber":157,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-12-17"},{"lineNumber":158,"author":{"gitId":"-"},"content":"    if (todoTemplate.moderation \u0026\u0026 todoTemplate.comment) {","lastModifiedDate":"2019-12-17"},{"lineNumber":159,"author":{"gitId":"-"},"content":"      issue.issueDisputes \u003d todoTemplate.moderation.disputesToResolve.map((dispute, i) \u003d\u003e {","lastModifiedDate":"2019-12-17"},{"lineNumber":160,"author":{"gitId":"-"},"content":"        dispute.description \u003d issueTemplate.dispute.disputes[i].description;","lastModifiedDate":"2019-12-17"},{"lineNumber":161,"author":{"gitId":"-"},"content":"        return dispute;","lastModifiedDate":"2019-12-17"},{"lineNumber":162,"author":{"gitId":"-"},"content":"      });","lastModifiedDate":"2019-12-17"},{"lineNumber":163,"author":{"gitId":"-"},"content":"      issue.issueComment \u003d todoTemplate.comment;","lastModifiedDate":"2019-12-17"},{"lineNumber":164,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2019-12-17"},{"lineNumber":165,"author":{"gitId":"-"},"content":"    return issue;","lastModifiedDate":"2019-12-17"},{"lineNumber":166,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-12-17"},{"lineNumber":167,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":168,"author":{"gitId":"-"},"content":"  /**","lastModifiedDate":"2020-01-14"},{"lineNumber":169,"author":{"gitId":"-"},"content":"   * Creates a new copy of an exact same issue.","lastModifiedDate":"2020-01-14"},{"lineNumber":170,"author":{"gitId":"-"},"content":"   * This would come useful in the event when you want to update the issue but not the actual","lastModifiedDate":"2020-01-14"},{"lineNumber":171,"author":{"gitId":"-"},"content":"   * state of the application.","lastModifiedDate":"2020-01-14"},{"lineNumber":172,"author":{"gitId":"-"},"content":"   */","lastModifiedDate":"2020-01-14"},{"lineNumber":173,"author":{"gitId":"-"},"content":"  clone(phase: Phase): Issue {","lastModifiedDate":"2020-01-14"},{"lineNumber":174,"author":{"gitId":"-"},"content":"    switch (phase) {","lastModifiedDate":"2020-01-14"},{"lineNumber":175,"author":{"gitId":"-"},"content":"      case Phase.phaseBugReporting:","lastModifiedDate":"2020-01-14"},{"lineNumber":176,"author":{"gitId":"-"},"content":"        return Issue.createPhaseBugReportingIssue(this.githubIssue);","lastModifiedDate":"2020-01-14"},{"lineNumber":177,"author":{"gitId":"-"},"content":"      case Phase.phaseTeamResponse:","lastModifiedDate":"2020-01-14"},{"lineNumber":178,"author":{"gitId":"-"},"content":"        return Issue.createPhaseTeamResponseIssue(this.githubIssue, this.teamAssigned);","lastModifiedDate":"2020-09-12"},{"lineNumber":179,"author":{"gitId":"-"},"content":"      case Phase.phaseTesterResponse:","lastModifiedDate":"2020-01-14"},{"lineNumber":180,"author":{"gitId":"-"},"content":"        return Issue.createPhaseTesterResponseIssue(this.githubIssue);","lastModifiedDate":"2020-09-12"},{"lineNumber":181,"author":{"gitId":"-"},"content":"      case Phase.phaseModeration:","lastModifiedDate":"2020-01-14"},{"lineNumber":182,"author":{"gitId":"-"},"content":"        return Issue.createPhaseModerationIssue(this.githubIssue, this.teamAssigned);","lastModifiedDate":"2020-09-12"},{"lineNumber":183,"author":{"gitId":"-"},"content":"      default:","lastModifiedDate":"2020-01-14"},{"lineNumber":184,"author":{"gitId":"-"},"content":"        return Issue.createPhaseBugReportingIssue(this.githubIssue);","lastModifiedDate":"2020-01-14"},{"lineNumber":185,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2020-01-14"},{"lineNumber":186,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-01-14"},{"lineNumber":187,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":188,"author":{"gitId":"-"},"content":"  /**","lastModifiedDate":"2020-01-14"},{"lineNumber":189,"author":{"gitId":"-"},"content":"   * Depending on the phase of the peer testing, each phase will have a response associated to them.","lastModifiedDate":"2020-01-14"},{"lineNumber":190,"author":{"gitId":"-"},"content":"   * This function will allow the current instance of issue to retain the state of response of the given `issue`.","lastModifiedDate":"2020-01-14"},{"lineNumber":191,"author":{"gitId":"-"},"content":"   *","lastModifiedDate":"2020-01-14"},{"lineNumber":192,"author":{"gitId":"-"},"content":"   * @param phase - The phase in which you want to retain your responses.","lastModifiedDate":"2020-01-14"},{"lineNumber":193,"author":{"gitId":"-"},"content":"   * @param issue - The issue which you want your current instance to retain from.","lastModifiedDate":"2020-01-14"},{"lineNumber":194,"author":{"gitId":"-"},"content":"   */","lastModifiedDate":"2020-01-14"},{"lineNumber":195,"author":{"gitId":"-"},"content":"  retainResponses(phase: Phase, issue: Issue) {","lastModifiedDate":"2020-01-14"},{"lineNumber":196,"author":{"gitId":"-"},"content":"    this.issueComment \u003d issue.issueComment;","lastModifiedDate":"2020-01-14"},{"lineNumber":197,"author":{"gitId":"-"},"content":"    this.githubComments \u003d issue.githubComments;","lastModifiedDate":"2020-01-14"},{"lineNumber":198,"author":{"gitId":"-"},"content":"    switch (phase) {","lastModifiedDate":"2020-01-14"},{"lineNumber":199,"author":{"gitId":"-"},"content":"      case Phase.phaseBugReporting:","lastModifiedDate":"2020-01-14"},{"lineNumber":200,"author":{"gitId":"-"},"content":"        this.description \u003d issue.description;","lastModifiedDate":"2020-01-14"},{"lineNumber":201,"author":{"gitId":"-"},"content":"        break;","lastModifiedDate":"2020-01-14"},{"lineNumber":202,"author":{"gitId":"-"},"content":"      case Phase.phaseTeamResponse:","lastModifiedDate":"2020-01-14"},{"lineNumber":203,"author":{"gitId":"-"},"content":"        this.teamResponse \u003d issue.teamResponse;","lastModifiedDate":"2020-01-14"},{"lineNumber":204,"author":{"gitId":"-"},"content":"        break;","lastModifiedDate":"2020-01-14"},{"lineNumber":205,"author":{"gitId":"-"},"content":"      case Phase.phaseTesterResponse:","lastModifiedDate":"2020-01-14"},{"lineNumber":206,"author":{"gitId":"-"},"content":"        this.testerResponses \u003d issue.testerResponses;","lastModifiedDate":"2020-01-14"},{"lineNumber":207,"author":{"gitId":"-"},"content":"        this.teamResponse \u003d issue.teamResponse;","lastModifiedDate":"2020-01-14"},{"lineNumber":208,"author":{"gitId":"-"},"content":"        break;","lastModifiedDate":"2020-01-14"},{"lineNumber":209,"author":{"gitId":"-"},"content":"      case Phase.phaseModeration:","lastModifiedDate":"2020-01-14"},{"lineNumber":210,"author":{"gitId":"-"},"content":"        this.issueDisputes \u003d issue.issueDisputes;","lastModifiedDate":"2020-01-14"},{"lineNumber":211,"author":{"gitId":"-"},"content":"        break;","lastModifiedDate":"2020-01-14"},{"lineNumber":212,"author":{"gitId":"-"},"content":"      default:","lastModifiedDate":"2020-01-14"},{"lineNumber":213,"author":{"gitId":"-"},"content":"        break;","lastModifiedDate":"2020-01-14"},{"lineNumber":214,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2020-01-14"},{"lineNumber":215,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-01-14"},{"lineNumber":216,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":217,"author":{"gitId":"-"},"content":"  /**","lastModifiedDate":"2020-01-14"},{"lineNumber":218,"author":{"gitId":"-"},"content":"   * Updates the tester\u0027s responses and team response based on the given githubComment.","lastModifiedDate":"2020-01-14"},{"lineNumber":219,"author":{"gitId":"-"},"content":"   * @param githubComment - A version of githubComment to update the issue with.","lastModifiedDate":"2020-01-14"},{"lineNumber":220,"author":{"gitId":"-"},"content":"   */","lastModifiedDate":"2020-01-14"},{"lineNumber":221,"author":{"gitId":"-"},"content":"  updateTesterResponse(githubComment: GithubComment): void {","lastModifiedDate":"2020-01-14"},{"lineNumber":222,"author":{"gitId":"-"},"content":"    const template \u003d new TesterResponseTemplate([githubComment]);","lastModifiedDate":"2020-01-14"},{"lineNumber":223,"author":{"gitId":"-"},"content":"    this.issueComment \u003d template.comment;","lastModifiedDate":"2020-01-14"},{"lineNumber":224,"author":{"gitId":"AudreyFelicio"},"content":"    this.teamResponse \u003d template.teamResponse \u0026\u0026 template.teamResponse.content;","lastModifiedDate":"2021-06-30"},{"lineNumber":225,"author":{"gitId":"AudreyFelicio"},"content":"    this.testerResponses \u003d template.testerResponse \u0026\u0026 template.testerResponse.testerResponses;","lastModifiedDate":"2021-06-30"},{"lineNumber":226,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-01-14"},{"lineNumber":227,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":228,"author":{"gitId":"-"},"content":"  /**","lastModifiedDate":"2020-01-14"},{"lineNumber":229,"author":{"gitId":"-"},"content":"   * Updates the tutor\u0027s resolution of the disputes with a new version of githubComment.","lastModifiedDate":"2020-01-14"},{"lineNumber":230,"author":{"gitId":"-"},"content":"   * @param githubComment - A version of githubComment to update the dispute with.","lastModifiedDate":"2020-01-14"},{"lineNumber":231,"author":{"gitId":"-"},"content":"   */","lastModifiedDate":"2020-01-14"},{"lineNumber":232,"author":{"gitId":"-"},"content":"  updateDispute(githubComment: GithubComment): void {","lastModifiedDate":"2020-01-14"},{"lineNumber":233,"author":{"gitId":"-"},"content":"    const todoTemplate \u003d new TutorModerationTodoTemplate([githubComment]);","lastModifiedDate":"2020-01-14"},{"lineNumber":234,"author":{"gitId":"-"},"content":"    this.issueComment \u003d todoTemplate.comment;","lastModifiedDate":"2020-01-14"},{"lineNumber":235,"author":{"gitId":"-"},"content":"    this.issueDisputes \u003d todoTemplate.moderation.disputesToResolve.map((dispute, i) \u003d\u003e {","lastModifiedDate":"2020-01-14"},{"lineNumber":236,"author":{"gitId":"-"},"content":"      dispute.description \u003d this.issueDisputes[i].description;","lastModifiedDate":"2020-01-14"},{"lineNumber":237,"author":{"gitId":"-"},"content":"      return dispute;","lastModifiedDate":"2020-01-14"},{"lineNumber":238,"author":{"gitId":"-"},"content":"    });","lastModifiedDate":"2020-01-14"},{"lineNumber":239,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-01-14"},{"lineNumber":240,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":241,"author":{"gitId":"-"},"content":"  createGithubIssueDescription(): string {","lastModifiedDate":"2020-09-27"},{"lineNumber":242,"author":{"gitId":"-"},"content":"    return `${this.description}\\n${this.hiddenDataInDescription.toString()}`;","lastModifiedDate":"2020-09-27"},{"lineNumber":243,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-09-27"},{"lineNumber":244,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-09-27"},{"lineNumber":245,"author":{"gitId":"-"},"content":"  // Template url: https://github.com/CATcher-org/templates#dev-response-phase","lastModifiedDate":"2020-01-14"},{"lineNumber":246,"author":{"gitId":"-"},"content":"  createGithubTeamResponse(): string {","lastModifiedDate":"2020-01-14"},{"lineNumber":247,"author":{"gitId":"-"},"content":"    return `# Team\\\u0027s Response\\n${this.teamResponse}\\n` +","lastModifiedDate":"2020-01-14"},{"lineNumber":248,"author":{"gitId":"-"},"content":"      `## Duplicate status (if any):\\n${this.duplicateOf ? `Duplicate of #${this.duplicateOf}` : `--`}`;","lastModifiedDate":"2020-01-14"},{"lineNumber":249,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-01-14"},{"lineNumber":250,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":251,"author":{"gitId":"-"},"content":"  // Template url: https://github.com/CATcher-org/templates#tutor-moderation","lastModifiedDate":"2020-01-14"},{"lineNumber":252,"author":{"gitId":"-"},"content":"  createGithubTutorResponse(): string {","lastModifiedDate":"2020-01-14"},{"lineNumber":253,"author":{"gitId":"-"},"content":"    let tutorResponseString \u003d \u0027# Tutor Moderation\\n\\n\u0027;","lastModifiedDate":"2020-01-14"},{"lineNumber":254,"author":{"gitId":"-"},"content":"    for (const issueDispute of this.issueDisputes) {","lastModifiedDate":"2020-01-14"},{"lineNumber":255,"author":{"gitId":"-"},"content":"      tutorResponseString +\u003d issueDispute.toTutorResponseString();","lastModifiedDate":"2020-01-14"},{"lineNumber":256,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2020-01-14"},{"lineNumber":257,"author":{"gitId":"-"},"content":"    return tutorResponseString;","lastModifiedDate":"2020-01-14"},{"lineNumber":258,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-01-14"},{"lineNumber":259,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":260,"author":{"gitId":"-"},"content":"  // Template url: https://github.com/CATcher-org/templates#teams-response-1","lastModifiedDate":"2020-01-14"},{"lineNumber":261,"author":{"gitId":"-"},"content":"  createGithubTesterResponse(): string {","lastModifiedDate":"2020-01-14"},{"lineNumber":262,"author":{"gitId":"-"},"content":"    return `# Team\\\u0027s Response\\n${this.teamResponse}\\n` +","lastModifiedDate":"2020-01-14"},{"lineNumber":263,"author":{"gitId":"-"},"content":"      `# Items for the Tester to Verify\\n${this.getTesterResponsesString(this.testerResponses)}`;","lastModifiedDate":"2020-01-14"},{"lineNumber":264,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-01-14"},{"lineNumber":265,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":266,"author":{"gitId":"-"},"content":"  /**","lastModifiedDate":"2020-02-19"},{"lineNumber":267,"author":{"gitId":"-"},"content":"   * Gets the number of unresolved disputes in an Issue.","lastModifiedDate":"2020-02-19"},{"lineNumber":268,"author":{"gitId":"-"},"content":"   */","lastModifiedDate":"2020-02-19"},{"lineNumber":269,"author":{"gitId":"-"},"content":"  numOfUnresolvedDisputes(): number {","lastModifiedDate":"2020-02-19"},{"lineNumber":270,"author":{"gitId":"-"},"content":"    if (!this.issueDisputes) {","lastModifiedDate":"2020-02-19"},{"lineNumber":271,"author":{"gitId":"-"},"content":"      return 0;","lastModifiedDate":"2020-02-19"},{"lineNumber":272,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2020-02-19"},{"lineNumber":273,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-02-19"},{"lineNumber":274,"author":{"gitId":"-"},"content":"    return this.issueDisputes.reduce((prev, current) \u003d\u003e prev + Number(!current.isDone()), 0);","lastModifiedDate":"2020-03-04"},{"lineNumber":275,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-02-19"},{"lineNumber":276,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-02-19"},{"lineNumber":277,"author":{"gitId":"-"},"content":"  private getTesterResponsesString(testerResponses: TesterResponse[]): string {","lastModifiedDate":"2020-01-14"},{"lineNumber":278,"author":{"gitId":"-"},"content":"    let testerResponsesString \u003d \u0027\u0027;","lastModifiedDate":"2020-01-14"},{"lineNumber":279,"author":{"gitId":"-"},"content":"    for (const testerResponse of testerResponses) {","lastModifiedDate":"2020-01-14"},{"lineNumber":280,"author":{"gitId":"-"},"content":"      testerResponsesString +\u003d testerResponse.toString();","lastModifiedDate":"2020-01-14"},{"lineNumber":281,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2020-01-14"},{"lineNumber":282,"author":{"gitId":"-"},"content":"    return testerResponsesString;","lastModifiedDate":"2020-01-14"},{"lineNumber":283,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-01-14"},{"lineNumber":284,"author":{"gitId":"-"},"content":"}","lastModifiedDate":"2019-01-18"},{"lineNumber":285,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-18"},{"lineNumber":286,"author":{"gitId":"-"},"content":"export interface Issues {","lastModifiedDate":"2019-03-05"},{"lineNumber":287,"author":{"gitId":"-"},"content":"  [id: number]: Issue;","lastModifiedDate":"2019-03-05"},{"lineNumber":288,"author":{"gitId":"-"},"content":"}","lastModifiedDate":"2019-03-05"},{"lineNumber":289,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-03-05"},{"lineNumber":290,"author":{"gitId":"-"},"content":"export const SEVERITY_ORDER \u003d { \u0027-\u0027: 0 , VeryLow: 1, Low: 2, Medium: 3, High: 4 };","lastModifiedDate":"2020-02-25"},{"lineNumber":291,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-21"},{"lineNumber":292,"author":{"gitId":"-"},"content":"export const ISSUE_TYPE_ORDER \u003d { \u0027-\u0027: 0 , DocumentationBug: 1, FeatureFlaw: 2, FunctionalityBug: 3  };","lastModifiedDate":"2020-01-20"},{"lineNumber":293,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-02-05"},{"lineNumber":294,"author":{"gitId":"-"},"content":"export enum STATUS {","lastModifiedDate":"2019-04-05"},{"lineNumber":295,"author":{"gitId":"-"},"content":"  Incomplete \u003d \u0027Incomplete\u0027,","lastModifiedDate":"2019-04-05"},{"lineNumber":296,"author":{"gitId":"-"},"content":"  Done \u003d \u0027Done\u0027,","lastModifiedDate":"2019-04-05"},{"lineNumber":297,"author":{"gitId":"-"},"content":"}","lastModifiedDate":"2019-04-05"},{"lineNumber":298,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-04-05"},{"lineNumber":299,"author":{"gitId":"-"},"content":"export const IssuesFilter \u003d {","lastModifiedDate":"2019-02-26"},{"lineNumber":300,"author":{"gitId":"-"},"content":"  phaseBugReporting: {","lastModifiedDate":"2019-07-23"},{"lineNumber":301,"author":{"gitId":"-"},"content":"    Student: \u0027FILTER_BY_CREATOR\u0027,","lastModifiedDate":"2019-02-26"},{"lineNumber":302,"author":{"gitId":"-"},"content":"    Tutor: \u0027NO_FILTER\u0027,","lastModifiedDate":"2019-02-26"},{"lineNumber":303,"author":{"gitId":"-"},"content":"    Admin: \u0027NO_FILTER\u0027,","lastModifiedDate":"2019-02-26"},{"lineNumber":304,"author":{"gitId":"-"},"content":"  },","lastModifiedDate":"2019-02-26"},{"lineNumber":305,"author":{"gitId":"-"},"content":"  phaseTeamResponse: {","lastModifiedDate":"2019-07-23"},{"lineNumber":306,"author":{"gitId":"-"},"content":"    Student: \u0027FILTER_BY_TEAM\u0027,","lastModifiedDate":"2019-02-26"},{"lineNumber":307,"author":{"gitId":"-"},"content":"    Tutor: \u0027FILTER_BY_TEAM_ASSIGNED\u0027,","lastModifiedDate":"2019-02-26"},{"lineNumber":308,"author":{"gitId":"-"},"content":"    Admin: \u0027NO_FILTER\u0027,","lastModifiedDate":"2019-02-26"},{"lineNumber":309,"author":{"gitId":"-"},"content":"  },","lastModifiedDate":"2019-02-26"},{"lineNumber":310,"author":{"gitId":"-"},"content":"  phaseTesterResponse: {","lastModifiedDate":"2019-07-20"},{"lineNumber":311,"author":{"gitId":"-"},"content":"    Student: \u0027NO_FILTER\u0027,","lastModifiedDate":"2019-07-20"},{"lineNumber":312,"author":{"gitId":"-"},"content":"    Tutor: \u0027NO_ACCESS\u0027,","lastModifiedDate":"2019-07-20"},{"lineNumber":313,"author":{"gitId":"-"},"content":"    Admin: \u0027NO_FILTER\u0027,","lastModifiedDate":"2019-07-20"},{"lineNumber":314,"author":{"gitId":"-"},"content":"  },","lastModifiedDate":"2019-07-20"},{"lineNumber":315,"author":{"gitId":"-"},"content":"  phaseModeration: {","lastModifiedDate":"2019-07-23"},{"lineNumber":316,"author":{"gitId":"-"},"content":"    Student: \u0027NO_ACCESS\u0027,","lastModifiedDate":"2019-02-26"},{"lineNumber":317,"author":{"gitId":"-"},"content":"    Tutor: \u0027FILTER_BY_TEAM_ASSIGNED\u0027,","lastModifiedDate":"2019-02-26"},{"lineNumber":318,"author":{"gitId":"-"},"content":"    Admin: \u0027NO_FILTER\u0027,","lastModifiedDate":"2019-02-26"},{"lineNumber":319,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-02-16"},{"lineNumber":320,"author":{"gitId":"-"},"content":"};","lastModifiedDate":"2019-02-26"}],"authorContributionMap":{"AudreyFelicio":7,"-":313}},{"path":"src/app/core/services/phase.service.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Injectable } from \u0027@angular/core\u0027;","lastModifiedDate":"2019-02-24"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { HttpClient } from \u0027@angular/common/http\u0027;","lastModifiedDate":"2019-02-24"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { flatMap, map, retry, tap } from \u0027rxjs/operators\u0027;","lastModifiedDate":"2021-02-03"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { Observable, of, pipe } from \u0027rxjs\u0027;","lastModifiedDate":"2021-02-03"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import { GithubService } from \u0027./github.service\u0027;","lastModifiedDate":"2019-02-24"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import { LabelService } from \u0027./label.service\u0027;","lastModifiedDate":"2019-07-10"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import { UserService } from \u0027./user.service\u0027;","lastModifiedDate":"2019-09-09"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import { SessionData, assertSessionDataIntegrity } from \u0027../models/session.model\u0027;","lastModifiedDate":"2020-10-07"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import { Phase } from \u0027../models/phase.model\u0027;","lastModifiedDate":"2021-02-08"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import { throwIfFalse } from \u0027../../shared/lib/custom-ops\u0027;","lastModifiedDate":"2021-02-24"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import { RepoCreatorService } from \u0027./repo-creator.service\u0027;","lastModifiedDate":"2021-03-08"},{"lineNumber":12,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2021-02-24"},{"lineNumber":13,"author":{"gitId":"-"},"content":"export const SESSION_AVALIABILITY_FIX_FAILED \u003d \u0027Session Availability Fix failed.\u0027;","lastModifiedDate":"2021-02-24"},{"lineNumber":14,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-07-23"},{"lineNumber":15,"author":{"gitId":"-"},"content":"export const PhaseDescription \u003d {","lastModifiedDate":"2021-01-25"},{"lineNumber":16,"author":{"gitId":"-"},"content":"  [Phase.phaseBugReporting]: \u0027Bug Reporting Phase\u0027,","lastModifiedDate":"2021-01-25"},{"lineNumber":17,"author":{"gitId":"-"},"content":"  [Phase.phaseTeamResponse]: \u0027Team\\\u0027s Response Phase\u0027,","lastModifiedDate":"2021-01-25"},{"lineNumber":18,"author":{"gitId":"-"},"content":"  [Phase.phaseTesterResponse]: \u0027Tester\\\u0027s Response Phase\u0027,","lastModifiedDate":"2021-01-25"},{"lineNumber":19,"author":{"gitId":"-"},"content":"  [Phase.phaseModeration]: \u0027Moderation Phase\u0027","lastModifiedDate":"2021-01-25"},{"lineNumber":20,"author":{"gitId":"-"},"content":"};","lastModifiedDate":"2021-01-25"},{"lineNumber":21,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2021-01-25"},{"lineNumber":22,"author":{"gitId":"-"},"content":"@Injectable({","lastModifiedDate":"2019-02-24"},{"lineNumber":23,"author":{"gitId":"-"},"content":"  providedIn: \u0027root\u0027,","lastModifiedDate":"2019-02-24"},{"lineNumber":24,"author":{"gitId":"-"},"content":"})","lastModifiedDate":"2019-02-24"},{"lineNumber":25,"author":{"gitId":"-"},"content":"export class PhaseService {","lastModifiedDate":"2019-02-24"},{"lineNumber":26,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-02-24"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  public currentPhase: Phase;","lastModifiedDate":"2019-02-26"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  private repoName: string;","lastModifiedDate":"2019-05-17"},{"lineNumber":29,"author":{"gitId":"-"},"content":"  private orgName: string;","lastModifiedDate":"2019-05-17"},{"lineNumber":30,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-07-23"},{"lineNumber":31,"author":{"gitId":"-"},"content":"  public sessionData: SessionData;","lastModifiedDate":"2019-07-10"},{"lineNumber":32,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-02-24"},{"lineNumber":33,"author":{"gitId":"-"},"content":"  private phaseRepoOwners \u003d {","lastModifiedDate":"2019-07-10"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    phaseBugReporting: \u0027\u0027,","lastModifiedDate":"2019-07-23"},{"lineNumber":35,"author":{"gitId":"-"},"content":"    phaseTeamResponse: \u0027\u0027,","lastModifiedDate":"2019-07-23"},{"lineNumber":36,"author":{"gitId":"-"},"content":"    phaseTesterResponse: \u0027\u0027,","lastModifiedDate":"2019-07-20"},{"lineNumber":37,"author":{"gitId":"-"},"content":"    phaseModeration: \u0027\u0027","lastModifiedDate":"2019-07-23"},{"lineNumber":38,"author":{"gitId":"-"},"content":"  };","lastModifiedDate":"2019-07-10"},{"lineNumber":39,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-02-24"},{"lineNumber":40,"author":{"gitId":"-"},"content":"  constructor(private http: HttpClient,","lastModifiedDate":"2019-07-10"},{"lineNumber":41,"author":{"gitId":"-"},"content":"              private githubService: GithubService,","lastModifiedDate":"2019-07-10"},{"lineNumber":42,"author":{"gitId":"-"},"content":"              private labelService: LabelService,","lastModifiedDate":"2019-09-09"},{"lineNumber":43,"author":{"gitId":"-"},"content":"              private userService: UserService,","lastModifiedDate":"2019-09-09"},{"lineNumber":44,"author":{"gitId":"-"},"content":"              private repoCreatorService: RepoCreatorService) {}","lastModifiedDate":"2021-04-05"},{"lineNumber":45,"author":{"gitId":"-"},"content":"  /**","lastModifiedDate":"2019-07-10"},{"lineNumber":46,"author":{"gitId":"-"},"content":"   * Stores the location of the repositories belonging to","lastModifiedDate":"2019-07-10"},{"lineNumber":47,"author":{"gitId":"-"},"content":"   * each phase of the application.","lastModifiedDate":"2019-07-10"},{"lineNumber":48,"author":{"gitId":"-"},"content":"   * @param org - name of organization.","lastModifiedDate":"2019-07-10"},{"lineNumber":49,"author":{"gitId":"-"},"content":"   * @param user - name of user.","lastModifiedDate":"2019-07-10"},{"lineNumber":50,"author":{"gitId":"-"},"content":"   */","lastModifiedDate":"2019-07-10"},{"lineNumber":51,"author":{"gitId":"-"},"content":"  setPhaseOwners(org: string, user: string): void {","lastModifiedDate":"2019-07-10"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    this.orgName \u003d org;","lastModifiedDate":"2019-07-10"},{"lineNumber":53,"author":{"gitId":"-"},"content":"    this.phaseRepoOwners.phaseBugReporting \u003d user;","lastModifiedDate":"2019-07-23"},{"lineNumber":54,"author":{"gitId":"-"},"content":"    this.phaseRepoOwners.phaseTeamResponse \u003d org;","lastModifiedDate":"2019-07-23"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    this.phaseRepoOwners.phaseTesterResponse \u003d user;","lastModifiedDate":"2019-07-20"},{"lineNumber":56,"author":{"gitId":"-"},"content":"    this.phaseRepoOwners.phaseModeration \u003d org;","lastModifiedDate":"2019-07-23"},{"lineNumber":57,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-02-24"},{"lineNumber":58,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-02-24"},{"lineNumber":59,"author":{"gitId":"-"},"content":"  /**","lastModifiedDate":"2019-07-10"},{"lineNumber":60,"author":{"gitId":"-"},"content":"   * Returns the name of the owner of a given phase.","lastModifiedDate":"2019-07-10"},{"lineNumber":61,"author":{"gitId":"-"},"content":"   * @param phase","lastModifiedDate":"2019-07-10"},{"lineNumber":62,"author":{"gitId":"-"},"content":"   */","lastModifiedDate":"2019-07-10"},{"lineNumber":63,"author":{"gitId":"-"},"content":"  getPhaseOwner(phase: string): string {","lastModifiedDate":"2019-07-10"},{"lineNumber":64,"author":{"gitId":"-"},"content":"    return this.phaseRepoOwners[phase];","lastModifiedDate":"2019-07-10"},{"lineNumber":65,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-07-10"},{"lineNumber":66,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-02-24"},{"lineNumber":67,"author":{"gitId":"-"},"content":"  fetchSessionData(): Observable\u003cSessionData\u003e {","lastModifiedDate":"2019-07-10"},{"lineNumber":68,"author":{"gitId":"-"},"content":"    return this.githubService.fetchSettingsFile().pipe(","lastModifiedDate":"2019-07-10"},{"lineNumber":69,"author":{"gitId":"-"},"content":"      map(data \u003d\u003e data as SessionData)","lastModifiedDate":"2019-07-10"},{"lineNumber":70,"author":{"gitId":"-"},"content":"    );","lastModifiedDate":"2019-02-24"},{"lineNumber":71,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-02-24"},{"lineNumber":72,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-02-24"},{"lineNumber":73,"author":{"gitId":"-"},"content":"  /**","lastModifiedDate":"2020-03-04"},{"lineNumber":74,"author":{"gitId":"-"},"content":"   * Will fetch session data and update phase service with it.","lastModifiedDate":"2020-03-04"},{"lineNumber":75,"author":{"gitId":"-"},"content":"   */","lastModifiedDate":"2020-03-04"},{"lineNumber":76,"author":{"gitId":"zatkiller"},"content":"  storeSessionData(): Observable\u003cvoid\u003e {","lastModifiedDate":"2021-07-04"},{"lineNumber":77,"author":{"gitId":"-"},"content":"    return this.fetchSessionData().pipe(","lastModifiedDate":"2020-03-04"},{"lineNumber":78,"author":{"gitId":"-"},"content":"      assertSessionDataIntegrity(),","lastModifiedDate":"2020-10-07"},{"lineNumber":79,"author":{"gitId":"-"},"content":"      map((sessionData: SessionData) \u003d\u003e {","lastModifiedDate":"2020-03-04"},{"lineNumber":80,"author":{"gitId":"-"},"content":"        this.updateSessionParameters(sessionData);","lastModifiedDate":"2020-03-04"},{"lineNumber":81,"author":{"gitId":"-"},"content":"      })","lastModifiedDate":"2020-03-04"},{"lineNumber":82,"author":{"gitId":"-"},"content":"    );","lastModifiedDate":"2020-03-04"},{"lineNumber":83,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-03-04"},{"lineNumber":84,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-03-04"},{"lineNumber":85,"author":{"gitId":"-"},"content":"  /**","lastModifiedDate":"2020-03-04"},{"lineNumber":86,"author":{"gitId":"-"},"content":"   * Determines the github\u0027s level of repo permission required for the phase.","lastModifiedDate":"2020-03-04"},{"lineNumber":87,"author":{"gitId":"-"},"content":"   * Ref: https://developer.github.com/apps/building-oauth-apps/understanding-scopes-for-oauth-apps/#available-scopes","lastModifiedDate":"2020-03-04"},{"lineNumber":88,"author":{"gitId":"-"},"content":"   */","lastModifiedDate":"2020-03-04"},{"lineNumber":89,"author":{"gitId":"-"},"content":"  githubRepoPermissionLevel(): string {","lastModifiedDate":"2020-03-04"},{"lineNumber":90,"author":{"gitId":"-"},"content":"    if (this.sessionData.openPhases.includes(Phase.phaseModeration)) {","lastModifiedDate":"2020-03-04"},{"lineNumber":91,"author":{"gitId":"-"},"content":"      return \u0027repo\u0027;","lastModifiedDate":"2020-03-04"},{"lineNumber":92,"author":{"gitId":"-"},"content":"    } else {","lastModifiedDate":"2020-03-04"},{"lineNumber":93,"author":{"gitId":"-"},"content":"      return \u0027public_repo\u0027;","lastModifiedDate":"2020-03-04"},{"lineNumber":94,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2020-03-04"},{"lineNumber":95,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-03-04"},{"lineNumber":96,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-03-04"},{"lineNumber":97,"author":{"gitId":"-"},"content":"  /**","lastModifiedDate":"2019-09-09"},{"lineNumber":98,"author":{"gitId":"-"},"content":"   * Checks if the necessary repository is available and creates it if the permissions are available.","lastModifiedDate":"2019-09-09"},{"lineNumber":99,"author":{"gitId":"-"},"content":"   * @param sessionData","lastModifiedDate":"2019-09-09"},{"lineNumber":100,"author":{"gitId":"-"},"content":"   */","lastModifiedDate":"2019-09-09"},{"lineNumber":101,"author":{"gitId":"-"},"content":"  verifySessionAvailability(sessionData: SessionData): Observable\u003cboolean\u003e {","lastModifiedDate":"2019-09-09"},{"lineNumber":102,"author":{"gitId":"-"},"content":"    return this.githubService.isRepositoryPresent(this.phaseRepoOwners[this.currentPhase], sessionData[this.currentPhase]);","lastModifiedDate":"2019-09-09"},{"lineNumber":103,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-09-09"},{"lineNumber":104,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-09-09"},{"lineNumber":105,"author":{"gitId":"-"},"content":"  /**","lastModifiedDate":"2019-07-10"},{"lineNumber":106,"author":{"gitId":"-"},"content":"   * Stores session data and sets current session\u0027s phase.","lastModifiedDate":"2019-07-10"},{"lineNumber":107,"author":{"gitId":"-"},"content":"   * @param sessionData","lastModifiedDate":"2019-07-10"},{"lineNumber":108,"author":{"gitId":"-"},"content":"   */","lastModifiedDate":"2019-07-10"},{"lineNumber":109,"author":{"gitId":"-"},"content":"  updateSessionParameters(sessionData: SessionData) {","lastModifiedDate":"2019-07-10"},{"lineNumber":110,"author":{"gitId":"-"},"content":"    this.sessionData \u003d sessionData;","lastModifiedDate":"2019-07-10"},{"lineNumber":111,"author":{"gitId":"-"},"content":"    this.currentPhase \u003d Phase[sessionData.openPhases[0]];","lastModifiedDate":"2019-07-10"},{"lineNumber":112,"author":{"gitId":"-"},"content":"    this.repoName \u003d sessionData[sessionData.openPhases[0]];","lastModifiedDate":"2019-07-10"},{"lineNumber":113,"author":{"gitId":"-"},"content":"    this.githubService.storePhaseDetails(this.phaseRepoOwners[this.currentPhase], this.repoName);","lastModifiedDate":"2019-07-10"},{"lineNumber":114,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-07-10"},{"lineNumber":115,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-07-10"},{"lineNumber":116,"author":{"gitId":"-"},"content":"  /**","lastModifiedDate":"2019-09-09"},{"lineNumber":117,"author":{"gitId":"-"},"content":"   * Ensures that the necessary data for the current session is available","lastModifiedDate":"2019-09-09"},{"lineNumber":118,"author":{"gitId":"-"},"content":"   * and synchronized with the remote server.","lastModifiedDate":"2019-09-09"},{"lineNumber":119,"author":{"gitId":"-"},"content":"   */","lastModifiedDate":"2019-09-09"},{"lineNumber":120,"author":{"gitId":"-"},"content":"  sessionSetup(): Observable\u003cany\u003e {","lastModifiedDate":"2019-07-10"},{"lineNumber":121,"author":{"gitId":"-"},"content":"    // Permission Caching Mechanism to prevent repeating permission request.","lastModifiedDate":"2021-02-03"},{"lineNumber":122,"author":{"gitId":"-"},"content":"    let isSessionFixPermissionGranted \u003d false;","lastModifiedDate":"2021-02-03"},{"lineNumber":123,"author":{"gitId":"-"},"content":"    const cacheSessionFixPermission \u003d () \u003d\u003e {","lastModifiedDate":"2021-02-03"},{"lineNumber":124,"author":{"gitId":"-"},"content":"      return pipe(","lastModifiedDate":"2021-02-03"},{"lineNumber":125,"author":{"gitId":"-"},"content":"        tap((sessionFixPermission: boolean | null) \u003d\u003e {","lastModifiedDate":"2021-02-03"},{"lineNumber":126,"author":{"gitId":"-"},"content":"          isSessionFixPermissionGranted \u003d sessionFixPermission ? sessionFixPermission : false;","lastModifiedDate":"2021-02-03"},{"lineNumber":127,"author":{"gitId":"-"},"content":"        })","lastModifiedDate":"2021-02-03"},{"lineNumber":128,"author":{"gitId":"-"},"content":"      );","lastModifiedDate":"2021-02-03"},{"lineNumber":129,"author":{"gitId":"-"},"content":"    };","lastModifiedDate":"2021-02-03"},{"lineNumber":130,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2021-02-03"},{"lineNumber":131,"author":{"gitId":"-"},"content":"    return this.fetchSessionData().pipe(","lastModifiedDate":"2019-07-10"},{"lineNumber":132,"author":{"gitId":"-"},"content":"      assertSessionDataIntegrity(),","lastModifiedDate":"2020-10-07"},{"lineNumber":133,"author":{"gitId":"-"},"content":"      flatMap((sessionData: SessionData) \u003d\u003e {","lastModifiedDate":"2019-07-10"},{"lineNumber":134,"author":{"gitId":"-"},"content":"        this.updateSessionParameters(sessionData);","lastModifiedDate":"2019-07-10"},{"lineNumber":135,"author":{"gitId":"-"},"content":"        return this.verifySessionAvailability(sessionData);","lastModifiedDate":"2019-09-09"},{"lineNumber":136,"author":{"gitId":"-"},"content":"      }),","lastModifiedDate":"2019-09-09"},{"lineNumber":137,"author":{"gitId":"-"},"content":"      this.repoCreatorService.requestRepoCreationPermissions(this.currentPhase, this.sessionData[this.currentPhase]),","lastModifiedDate":"2021-04-05"},{"lineNumber":138,"author":{"gitId":"-"},"content":"      cacheSessionFixPermission(),","lastModifiedDate":"2021-02-03"},{"lineNumber":139,"author":{"gitId":"-"},"content":"      this.repoCreatorService.verifyRepoCreationPermissions(this.currentPhase),","lastModifiedDate":"2021-03-24"},{"lineNumber":140,"author":{"gitId":"-"},"content":"      this.repoCreatorService.attemptRepoCreation(this.sessionData[this.currentPhase]),","lastModifiedDate":"2021-03-24"},{"lineNumber":141,"author":{"gitId":"-"},"content":"      this.repoCreatorService.verifyRepoCreation(this.getPhaseOwner(this.currentPhase), this.sessionData[this.currentPhase]),","lastModifiedDate":"2021-03-08"},{"lineNumber":142,"author":{"gitId":"-"},"content":"      throwIfFalse(","lastModifiedDate":"2021-02-24"},{"lineNumber":143,"author":{"gitId":"-"},"content":"        (isSessionCreated: boolean) \u003d\u003e isSessionCreated,","lastModifiedDate":"2021-02-24"},{"lineNumber":144,"author":{"gitId":"-"},"content":"        () \u003d\u003e new Error(SESSION_AVALIABILITY_FIX_FAILED)),","lastModifiedDate":"2021-02-24"},{"lineNumber":145,"author":{"gitId":"-"},"content":"      this.labelService.syncLabels(),","lastModifiedDate":"2021-02-24"},{"lineNumber":146,"author":{"gitId":"-"},"content":"      retry(1)  // Retry once, to handle edge case where GitHub API cannot immediately confirm existence of the newly created repo.","lastModifiedDate":"2021-02-03"},{"lineNumber":147,"author":{"gitId":"-"},"content":"    );","lastModifiedDate":"2019-07-10"},{"lineNumber":148,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-05-17"},{"lineNumber":149,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-05-17"},{"lineNumber":150,"author":{"gitId":"-"},"content":"  public getPhaseDetail() {","lastModifiedDate":"2019-05-17"},{"lineNumber":151,"author":{"gitId":"-"},"content":"    return this.orgName.concat(\u0027/\u0027).concat(this.repoName);","lastModifiedDate":"2019-05-17"},{"lineNumber":152,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-05-17"},{"lineNumber":153,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-05-17"},{"lineNumber":154,"author":{"gitId":"-"},"content":"  reset() {","lastModifiedDate":"2019-02-25"},{"lineNumber":155,"author":{"gitId":"-"},"content":"    this.currentPhase \u003d null;","lastModifiedDate":"2019-02-26"},{"lineNumber":156,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-02-24"},{"lineNumber":157,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-02-24"},{"lineNumber":158,"author":{"gitId":"-"},"content":"}","lastModifiedDate":"2019-02-24"}],"authorContributionMap":{"zatkiller":1,"-":157}},{"path":"src/app/phase-bug-reporting/new-issue/new-issue.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Component, OnInit } from \u0027@angular/core\u0027;","lastModifiedDate":"2019-01-21"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { IssueService } from \u0027../../core/services/issue.service\u0027;","lastModifiedDate":"2019-01-21"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { Issue } from \u0027../../core/models/issue.model\u0027;","lastModifiedDate":"2020-02-28"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { FormBuilder, FormGroup, NgForm, Validators } from \u0027@angular/forms\u0027;","lastModifiedDate":"2019-01-21"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import { ErrorHandlingService } from \u0027../../core/services/error-handling.service\u0027;","lastModifiedDate":"2019-01-21"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import { Router } from \u0027@angular/router\u0027;","lastModifiedDate":"2019-02-01"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import { finalize } from \u0027rxjs/operators\u0027;","lastModifiedDate":"2019-02-04"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import { LabelService } from \u0027../../core/services/label.service\u0027;","lastModifiedDate":"2019-05-22"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import { SUBMIT_BUTTON_TEXT } from \u0027../../shared/view-issue/view-issue.component\u0027;","lastModifiedDate":"2019-10-22"},{"lineNumber":10,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-21"},{"lineNumber":11,"author":{"gitId":"-"},"content":"@Component({","lastModifiedDate":"2019-01-21"},{"lineNumber":12,"author":{"gitId":"-"},"content":"  selector: \u0027app-new-issue\u0027,","lastModifiedDate":"2019-01-21"},{"lineNumber":13,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./new-issue.component.html\u0027,","lastModifiedDate":"2019-01-21"},{"lineNumber":14,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./new-issue.component.css\u0027]","lastModifiedDate":"2019-01-21"},{"lineNumber":15,"author":{"gitId":"-"},"content":"})","lastModifiedDate":"2019-01-21"},{"lineNumber":16,"author":{"gitId":"-"},"content":"export class NewIssueComponent implements OnInit {","lastModifiedDate":"2019-01-21"},{"lineNumber":17,"author":{"gitId":"-"},"content":"  newIssueForm: FormGroup;","lastModifiedDate":"2019-01-21"},{"lineNumber":18,"author":{"gitId":"-"},"content":"  isFormPending \u003d false;","lastModifiedDate":"2019-02-04"},{"lineNumber":19,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-21"},{"lineNumber":20,"author":{"gitId":"-"},"content":"  submitButtonText: string;","lastModifiedDate":"2019-10-22"},{"lineNumber":21,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-10-22"},{"lineNumber":22,"author":{"gitId":"-"},"content":"  constructor(private issueService: IssueService, private formBuilder: FormBuilder,","lastModifiedDate":"2019-02-01"},{"lineNumber":23,"author":{"gitId":"-"},"content":"              private errorHandlingService: ErrorHandlingService, public labelService: LabelService,","lastModifiedDate":"2019-06-11"},{"lineNumber":24,"author":{"gitId":"-"},"content":"              private router: Router) { }","lastModifiedDate":"2019-02-01"},{"lineNumber":25,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-21"},{"lineNumber":26,"author":{"gitId":"-"},"content":"  ngOnInit() {","lastModifiedDate":"2019-01-21"},{"lineNumber":27,"author":{"gitId":"-"},"content":"    this.newIssueForm \u003d this.formBuilder.group({","lastModifiedDate":"2019-01-21"},{"lineNumber":28,"author":{"gitId":"-"},"content":"      title: [\u0027\u0027, Validators.required],","lastModifiedDate":"2019-01-21"},{"lineNumber":29,"author":{"gitId":"AudreyFelicio"},"content":"      description: [\u0027\u0027],","lastModifiedDate":"2021-06-24"},{"lineNumber":30,"author":{"gitId":"-"},"content":"      severity: [\u0027\u0027, Validators.required],","lastModifiedDate":"2019-01-21"},{"lineNumber":31,"author":{"gitId":"-"},"content":"      type: [\u0027\u0027, Validators.required],","lastModifiedDate":"2019-01-21"},{"lineNumber":32,"author":{"gitId":"-"},"content":"    });","lastModifiedDate":"2019-01-21"},{"lineNumber":33,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-10-22"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    this.submitButtonText \u003d SUBMIT_BUTTON_TEXT.SUBMIT;","lastModifiedDate":"2019-10-22"},{"lineNumber":35,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-01-21"},{"lineNumber":36,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-21"},{"lineNumber":37,"author":{"gitId":"-"},"content":"  submitNewIssue(form: NgForm) {","lastModifiedDate":"2019-01-21"},{"lineNumber":38,"author":{"gitId":"-"},"content":"    if (this.newIssueForm.invalid) {","lastModifiedDate":"2019-01-21"},{"lineNumber":39,"author":{"gitId":"-"},"content":"      return;","lastModifiedDate":"2019-01-21"},{"lineNumber":40,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2019-01-21"},{"lineNumber":41,"author":{"gitId":"-"},"content":"    this.isFormPending \u003d true;","lastModifiedDate":"2019-02-04"},{"lineNumber":42,"author":{"gitId":"-"},"content":"    this.issueService.createIssue(this.title.value,","lastModifiedDate":"2020-02-28"},{"lineNumber":43,"author":{"gitId":"-"},"content":"      Issue.updateDescription(this.description.value),","lastModifiedDate":"2020-02-28"},{"lineNumber":44,"author":{"gitId":"-"},"content":"      this.severity.value, this.type.value).pipe(finalize(() \u003d\u003e this.isFormPending \u003d false))","lastModifiedDate":"2019-02-04"},{"lineNumber":45,"author":{"gitId":"-"},"content":"      .subscribe(","lastModifiedDate":"2019-02-04"},{"lineNumber":46,"author":{"gitId":"-"},"content":"        newIssue \u003d\u003e {","lastModifiedDate":"2019-02-04"},{"lineNumber":47,"author":{"gitId":"-"},"content":"          this.issueService.updateLocalStore(newIssue);","lastModifiedDate":"2019-01-21"},{"lineNumber":48,"author":{"gitId":"-"},"content":"          this.router.navigateByUrl(`phaseBugReporting/issues/${newIssue.id}`);","lastModifiedDate":"2019-07-23"},{"lineNumber":49,"author":{"gitId":"-"},"content":"          form.resetForm();","lastModifiedDate":"2019-01-21"},{"lineNumber":50,"author":{"gitId":"-"},"content":"          },","lastModifiedDate":"2019-02-04"},{"lineNumber":51,"author":{"gitId":"-"},"content":"          error \u003d\u003e {","lastModifiedDate":"2019-02-04"},{"lineNumber":52,"author":{"gitId":"-"},"content":"          this.errorHandlingService.handleError(error);","lastModifiedDate":"2020-01-14"},{"lineNumber":53,"author":{"gitId":"-"},"content":"        });","lastModifiedDate":"2019-01-21"},{"lineNumber":54,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-01-21"},{"lineNumber":55,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-21"},{"lineNumber":56,"author":{"gitId":"-"},"content":"  get title() {","lastModifiedDate":"2019-01-21"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    return this.newIssueForm.get(\u0027title\u0027);","lastModifiedDate":"2019-01-22"},{"lineNumber":58,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-01-21"},{"lineNumber":59,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-21"},{"lineNumber":60,"author":{"gitId":"-"},"content":"  get description() {","lastModifiedDate":"2019-01-21"},{"lineNumber":61,"author":{"gitId":"-"},"content":"    return this.newIssueForm.get(\u0027description\u0027);","lastModifiedDate":"2019-01-22"},{"lineNumber":62,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-01-21"},{"lineNumber":63,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-21"},{"lineNumber":64,"author":{"gitId":"-"},"content":"  get severity() {","lastModifiedDate":"2019-01-21"},{"lineNumber":65,"author":{"gitId":"-"},"content":"    return this.newIssueForm.get(\u0027severity\u0027);","lastModifiedDate":"2019-01-22"},{"lineNumber":66,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-01-21"},{"lineNumber":67,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-21"},{"lineNumber":68,"author":{"gitId":"-"},"content":"  get type() {","lastModifiedDate":"2019-01-21"},{"lineNumber":69,"author":{"gitId":"-"},"content":"    return this.newIssueForm.get(\u0027type\u0027);","lastModifiedDate":"2019-01-22"},{"lineNumber":70,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-01-21"},{"lineNumber":71,"author":{"gitId":"-"},"content":"}","lastModifiedDate":"2019-01-21"}],"authorContributionMap":{"AudreyFelicio":1,"-":70}},{"path":"src/app/shared/comment-editor/comment-editor.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cform [formGroup]\u003d\"commentForm\" style\u003d\"min-height: 350px\"\u003e","lastModifiedDate":"2019-02-16"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003cmat-tab-group class\u003d\"mat-elevation-z1\" animationDuration\u003d\"0ms\"\u003e","lastModifiedDate":"2019-02-05"},{"lineNumber":3,"author":{"gitId":"-"},"content":"    \u003cmat-tab label\u003d\"Write\"\u003e","lastModifiedDate":"2019-01-25"},{"lineNumber":4,"author":{"gitId":"-"},"content":"      \u003cdiv #dropArea class\u003d\"tab-content\"","lastModifiedDate":"2019-01-28"},{"lineNumber":5,"author":{"gitId":"-"},"content":"           (dragleave)\u003d\"onDragExit($event)\" (dragenter)\u003d\"onDragEnter($event)\" (drop)\u003d\"onDrop($event)\"","lastModifiedDate":"2019-01-28"},{"lineNumber":6,"author":{"gitId":"-"},"content":"           (dragover)\u003d\"enableFileDrop($event)\"\u003e","lastModifiedDate":"2019-01-28"},{"lineNumber":7,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-28"},{"lineNumber":8,"author":{"gitId":"-"},"content":"        \u003cmat-form-field appearance\u003d\"outline\" style\u003d\"width: 100%\"\u003e","lastModifiedDate":"2019-01-28"},{"lineNumber":9,"author":{"gitId":"-"},"content":"          \u003cmat-label\u003e\u003c/mat-label\u003e","lastModifiedDate":"2019-01-25"},{"lineNumber":10,"author":{"gitId":"-"},"content":"          \u003ctextarea (paste)\u003d\"onPaste($event)\" #commentTextArea (dragover)\u003d\"disableCaretMovement($event)\"","lastModifiedDate":"2020-11-18"},{"lineNumber":11,"author":{"gitId":"AudreyFelicio"},"content":"                    id\u003d\"{{ this.id }}\" formControlName\u003d\"{{ this.id }}\" matInput","lastModifiedDate":"2021-06-24"},{"lineNumber":12,"author":{"gitId":"-"},"content":"                    cdkTextareaAutosize #autosize\u003d\"cdkTextareaAutosize\" cdkAutosizeMinRows\u003d\"10\"","lastModifiedDate":"2019-01-25"},{"lineNumber":13,"author":{"gitId":"AudreyFelicio"},"content":"                    cdkAutosizeMaxRows\u003d\"20\" class\u003d\"text-input-area\" placeholder\u003d\"{{ this.placeholderText }}\"\u003e\u003c/textarea\u003e","lastModifiedDate":"2021-06-24"},{"lineNumber":14,"author":{"gitId":"-"},"content":"          \u003cmat-error *ngIf\u003d\"commentField.errors \u0026\u0026 commentField.errors[\u0027required\u0027] \u0026\u0026 commentField.touched\"\u003e","lastModifiedDate":"2019-01-25"},{"lineNumber":15,"author":{"gitId":"-"},"content":"            Description required.","lastModifiedDate":"2019-01-25"},{"lineNumber":16,"author":{"gitId":"-"},"content":"          \u003c/mat-error\u003e","lastModifiedDate":"2019-01-25"},{"lineNumber":17,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-28"},{"lineNumber":18,"author":{"gitId":"-"},"content":"          \u003cdiv class\u003d\"drag-and-drop\"\u003e","lastModifiedDate":"2019-01-28"},{"lineNumber":19,"author":{"gitId":"-"},"content":"            \u003cspan *ngIf\u003d\"!isInErrorState\"\u003e Attach files by dragging \u0026 dropping or select them by clicking here. \u003c/span\u003e","lastModifiedDate":"2019-02-01"},{"lineNumber":20,"author":{"gitId":"-"},"content":"            \u003cspan *ngIf\u003d\"isInErrorState\" class\u003d\"error\"\u003e {{uploadErrorMessage}} \u003c/span\u003e","lastModifiedDate":"2019-01-28"},{"lineNumber":21,"author":{"gitId":"-"},"content":"            \u003cinput #fileInput [disabled]\u003d\"this.commentField.disabled\"","lastModifiedDate":"2019-07-30"},{"lineNumber":22,"author":{"gitId":"-"},"content":"                   [accept]\u003d\"SUPPORTED_FILE_TYPES\"","lastModifiedDate":"2020-01-29"},{"lineNumber":23,"author":{"gitId":"-"},"content":"                   type\u003d\"file\" class\u003d\"file\" (change)\u003d\"onFileInputUpload($event, fileInput)\"\u003e","lastModifiedDate":"2019-02-02"},{"lineNumber":24,"author":{"gitId":"-"},"content":"          \u003c/div\u003e","lastModifiedDate":"2019-01-28"},{"lineNumber":25,"author":{"gitId":"-"},"content":"        \u003c/mat-form-field\u003e","lastModifiedDate":"2019-01-25"},{"lineNumber":26,"author":{"gitId":"-"},"content":"      \u003c/div\u003e","lastModifiedDate":"2019-01-25"},{"lineNumber":27,"author":{"gitId":"-"},"content":"    \u003c/mat-tab\u003e","lastModifiedDate":"2019-01-25"},{"lineNumber":28,"author":{"gitId":"-"},"content":"    \u003cmat-tab label\u003d\"Preview\"\u003e","lastModifiedDate":"2019-01-25"},{"lineNumber":29,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"tab-content\" style\u003d\"min-height: 228px\"\u003e","lastModifiedDate":"2019-01-25"},{"lineNumber":30,"author":{"gitId":"-"},"content":"        \u003cmarkdown #markdownArea *ngIf\u003d\"commentField.value !\u003d\u003d \u0027\u0027\" [data]\u003d\"commentField.value\"\u003e\u003c/markdown\u003e","lastModifiedDate":"2019-02-01"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        \u003cdiv *ngIf\u003d\"commentField.value \u003d\u003d\u003d\u0027\u0027\"\u003e Nothing to preview. \u003c/div\u003e","lastModifiedDate":"2019-01-25"},{"lineNumber":32,"author":{"gitId":"-"},"content":"      \u003c/div\u003e","lastModifiedDate":"2019-01-25"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    \u003c/mat-tab\u003e","lastModifiedDate":"2019-01-25"},{"lineNumber":34,"author":{"gitId":"-"},"content":"  \u003c/mat-tab-group\u003e","lastModifiedDate":"2019-01-25"},{"lineNumber":35,"author":{"gitId":"-"},"content":"\u003c/form\u003e","lastModifiedDate":"2019-01-25"}],"authorContributionMap":{"AudreyFelicio":2,"-":33}},{"path":"src/app/shared/comment-editor/comment-editor.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Component, EventEmitter, Input, OnInit, Output, ViewChild } from \u0027@angular/core\u0027;","lastModifiedDate":"2019-10-22"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { AbstractControl, FormGroup } from \u0027@angular/forms\u0027;","lastModifiedDate":"2019-01-25"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import {","lastModifiedDate":"2021-03-13"},{"lineNumber":4,"author":{"gitId":"-"},"content":"  FILE_TYPE_SUPPORT_ERROR,","lastModifiedDate":"2021-03-13"},{"lineNumber":5,"author":{"gitId":"-"},"content":"  SUPPORTED_FILE_TYPES,","lastModifiedDate":"2021-03-13"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  UploadService,","lastModifiedDate":"2021-03-13"},{"lineNumber":7,"author":{"gitId":"-"},"content":"  getSizeExceedErrorMsg } from \u0027../../core/services/upload.service\u0027;","lastModifiedDate":"2021-03-13"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import { ErrorHandlingService } from \u0027../../core/services/error-handling.service\u0027;","lastModifiedDate":"2019-01-28"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import { HttpErrorResponse } from \u0027@angular/common/http\u0027;","lastModifiedDate":"2020-01-14"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import { ElectronService } from \u0027../../core/services/electron.service\u0027;","lastModifiedDate":"2021-01-09"},{"lineNumber":11,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-25"},{"lineNumber":12,"author":{"gitId":"-"},"content":"const DISPLAYABLE_CONTENT \u003d [\u0027gif\u0027, \u0027jpeg\u0027, \u0027jpg\u0027, \u0027png\u0027];","lastModifiedDate":"2019-02-01"},{"lineNumber":13,"author":{"gitId":"-"},"content":"const BYTES_PER_MB \u003d 1000000;","lastModifiedDate":"2021-03-13"},{"lineNumber":14,"author":{"gitId":"-"},"content":"const MAX_UPLOAD_SIZE \u003d 10 * BYTES_PER_MB; // 10MB","lastModifiedDate":"2021-03-13"},{"lineNumber":15,"author":{"gitId":"-"},"content":"const MAX_VIDEO_UPLOAD_SIZE \u003d 5 * BYTES_PER_MB; // 5MB","lastModifiedDate":"2021-03-13"},{"lineNumber":16,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-02-01"},{"lineNumber":17,"author":{"gitId":"-"},"content":"@Component({","lastModifiedDate":"2019-01-25"},{"lineNumber":18,"author":{"gitId":"-"},"content":"  selector: \u0027app-comment-editor\u0027,","lastModifiedDate":"2019-01-25"},{"lineNumber":19,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./comment-editor.component.html\u0027,","lastModifiedDate":"2019-01-25"},{"lineNumber":20,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./comment-editor.component.css\u0027],","lastModifiedDate":"2019-01-28"},{"lineNumber":21,"author":{"gitId":"-"},"content":"})","lastModifiedDate":"2019-01-25"},{"lineNumber":22,"author":{"gitId":"-"},"content":"export class CommentEditorComponent implements OnInit {","lastModifiedDate":"2019-01-25"},{"lineNumber":23,"author":{"gitId":"-"},"content":"  readonly SUPPORTED_FILE_TYPES \u003d SUPPORTED_FILE_TYPES;","lastModifiedDate":"2020-02-03"},{"lineNumber":24,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-02-03"},{"lineNumber":25,"author":{"gitId":"-"},"content":"  constructor(private uploadService: UploadService,","lastModifiedDate":"2019-02-01"},{"lineNumber":26,"author":{"gitId":"-"},"content":"              private errorHandlingService: ErrorHandlingService,","lastModifiedDate":"2021-01-09"},{"lineNumber":27,"author":{"gitId":"-"},"content":"              private electronService: ElectronService) {}","lastModifiedDate":"2021-01-09"},{"lineNumber":28,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-25"},{"lineNumber":29,"author":{"gitId":"-"},"content":"  @Input() commentField: AbstractControl; // Compulsory Input","lastModifiedDate":"2019-07-20"},{"lineNumber":30,"author":{"gitId":"-"},"content":"  @Input() commentForm: FormGroup; // Compulsory Input","lastModifiedDate":"2019-07-20"},{"lineNumber":31,"author":{"gitId":"-"},"content":"  @Input() id: string; // Compulsory Input","lastModifiedDate":"2019-07-20"},{"lineNumber":32,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-10-22"},{"lineNumber":33,"author":{"gitId":"-"},"content":"  @Input() initialDescription?: string;","lastModifiedDate":"2019-07-20"},{"lineNumber":34,"author":{"gitId":"AudreyFelicio"},"content":"  placeholderText \u003d \u0027No details provided.\u0027;","lastModifiedDate":"2021-06-24"},{"lineNumber":35,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-10-22"},{"lineNumber":36,"author":{"gitId":"-"},"content":"  // Allows the comment editor to control the overall form\u0027s completeness.","lastModifiedDate":"2019-10-22"},{"lineNumber":37,"author":{"gitId":"-"},"content":"  @Input() isFormPending?: boolean;","lastModifiedDate":"2019-10-22"},{"lineNumber":38,"author":{"gitId":"-"},"content":"  @Output() isFormPendingChange: EventEmitter\u003cboolean\u003e \u003d new EventEmitter\u003cboolean\u003e();","lastModifiedDate":"2019-10-22"},{"lineNumber":39,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-10-22"},{"lineNumber":40,"author":{"gitId":"-"},"content":"  // Allow the comment editor to control the text of the submit button to prompt the user.","lastModifiedDate":"2019-10-22"},{"lineNumber":41,"author":{"gitId":"-"},"content":"  @Input() submitButtonText?: string;","lastModifiedDate":"2019-10-22"},{"lineNumber":42,"author":{"gitId":"-"},"content":"  @Output() submitButtonTextChange: EventEmitter\u003cstring\u003e \u003d new EventEmitter\u003cstring\u003e();","lastModifiedDate":"2019-10-22"},{"lineNumber":43,"author":{"gitId":"-"},"content":"  formatFileUploadingButtonText: (string) \u003d\u003e string \u003d ((currentButtonText: string) \u003d\u003e {","lastModifiedDate":"2019-10-23"},{"lineNumber":44,"author":{"gitId":"-"},"content":"    return currentButtonText + \u0027 (Waiting for File Upload to finish...)\u0027;","lastModifiedDate":"2019-10-23"},{"lineNumber":45,"author":{"gitId":"-"},"content":"  });","lastModifiedDate":"2019-10-23"},{"lineNumber":46,"author":{"gitId":"-"},"content":"  initialSubmitButtonText: string;","lastModifiedDate":"2019-10-29"},{"lineNumber":47,"author":{"gitId":"-"},"content":"  lastUploadingTime: string;","lastModifiedDate":"2019-10-29"},{"lineNumber":48,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-10-22"},{"lineNumber":49,"author":{"gitId":"-"},"content":"  @ViewChild(\u0027dropArea\u0027) dropArea;","lastModifiedDate":"2019-01-28"},{"lineNumber":50,"author":{"gitId":"-"},"content":"  @ViewChild(\u0027commentTextArea\u0027) commentTextArea;","lastModifiedDate":"2019-01-28"},{"lineNumber":51,"author":{"gitId":"-"},"content":"  @ViewChild(\u0027markdownArea\u0027) markdownArea;","lastModifiedDate":"2019-02-01"},{"lineNumber":52,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-02-01"},{"lineNumber":53,"author":{"gitId":"-"},"content":"  dragActiveCounter \u003d 0;","lastModifiedDate":"2019-01-28"},{"lineNumber":54,"author":{"gitId":"-"},"content":"  uploadErrorMessage: string;","lastModifiedDate":"2019-01-28"},{"lineNumber":55,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-25"},{"lineNumber":56,"author":{"gitId":"-"},"content":"  ngOnInit() {","lastModifiedDate":"2019-07-20"},{"lineNumber":57,"author":{"gitId":"-"},"content":"    if (this.initialDescription !\u003d\u003d undefined) {","lastModifiedDate":"2019-07-20"},{"lineNumber":58,"author":{"gitId":"-"},"content":"      this.commentField.setValue(this.initialDescription);","lastModifiedDate":"2019-07-20"},{"lineNumber":59,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2019-07-20"},{"lineNumber":60,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-07-20"},{"lineNumber":61,"author":{"gitId":"-"},"content":"    if (this.commentField \u003d\u003d\u003d undefined || this.commentForm \u003d\u003d\u003d undefined || this.id \u003d\u003d\u003d undefined) {","lastModifiedDate":"2019-07-20"},{"lineNumber":62,"author":{"gitId":"-"},"content":"      throw new Error(\u0027Comment Editor\\\u0027s compulsory properties are not defined.\u0027);","lastModifiedDate":"2019-07-20"},{"lineNumber":63,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2019-07-20"},{"lineNumber":64,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-10-29"},{"lineNumber":65,"author":{"gitId":"-"},"content":"    this.initialSubmitButtonText \u003d this.submitButtonText;","lastModifiedDate":"2019-10-29"},{"lineNumber":66,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-07-20"},{"lineNumber":67,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-28"},{"lineNumber":68,"author":{"gitId":"-"},"content":"  onDragEnter(event) {","lastModifiedDate":"2019-01-28"},{"lineNumber":69,"author":{"gitId":"-"},"content":"    event.preventDefault();","lastModifiedDate":"2019-01-28"},{"lineNumber":70,"author":{"gitId":"-"},"content":"    event.stopPropagation();","lastModifiedDate":"2019-01-28"},{"lineNumber":71,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-28"},{"lineNumber":72,"author":{"gitId":"-"},"content":"    this.dragActiveCounter++;","lastModifiedDate":"2019-01-28"},{"lineNumber":73,"author":{"gitId":"-"},"content":"    if (this.commentField.disabled) {","lastModifiedDate":"2019-07-30"},{"lineNumber":74,"author":{"gitId":"-"},"content":"      this.dropArea.nativeElement.classList.add(\u0027highlight-drag-box-disabled\u0027);","lastModifiedDate":"2019-07-30"},{"lineNumber":75,"author":{"gitId":"-"},"content":"    } else {","lastModifiedDate":"2019-07-30"},{"lineNumber":76,"author":{"gitId":"-"},"content":"      this.dropArea.nativeElement.classList.add(\u0027highlight-drag-box\u0027);","lastModifiedDate":"2019-01-28"},{"lineNumber":77,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2019-01-28"},{"lineNumber":78,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-07-30"},{"lineNumber":79,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-28"},{"lineNumber":80,"author":{"gitId":"-"},"content":"  // Prevent cursor in textarea from moving when file is dragged over it.","lastModifiedDate":"2019-01-28"},{"lineNumber":81,"author":{"gitId":"-"},"content":"  disableCaretMovement(event) {","lastModifiedDate":"2019-01-28"},{"lineNumber":82,"author":{"gitId":"-"},"content":"    event.preventDefault();","lastModifiedDate":"2019-01-28"},{"lineNumber":83,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-01-28"},{"lineNumber":84,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-28"},{"lineNumber":85,"author":{"gitId":"-"},"content":"  // To enable file drop in non-input elements, the dragOver event must be cancelled.","lastModifiedDate":"2019-01-28"},{"lineNumber":86,"author":{"gitId":"-"},"content":"  enableFileDrop(event) {","lastModifiedDate":"2019-01-28"},{"lineNumber":87,"author":{"gitId":"-"},"content":"    event.preventDefault();","lastModifiedDate":"2019-01-28"},{"lineNumber":88,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-01-28"},{"lineNumber":89,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-28"},{"lineNumber":90,"author":{"gitId":"-"},"content":"  onDrop(event) {","lastModifiedDate":"2019-01-28"},{"lineNumber":91,"author":{"gitId":"-"},"content":"    event.preventDefault();","lastModifiedDate":"2019-01-28"},{"lineNumber":92,"author":{"gitId":"-"},"content":"    event.stopPropagation();","lastModifiedDate":"2019-01-28"},{"lineNumber":93,"author":{"gitId":"-"},"content":"    this.removeHighlightBorderStyle();","lastModifiedDate":"2019-02-10"},{"lineNumber":94,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-28"},{"lineNumber":95,"author":{"gitId":"-"},"content":"    if (this.commentField.disabled) {","lastModifiedDate":"2019-07-30"},{"lineNumber":96,"author":{"gitId":"-"},"content":"      return;","lastModifiedDate":"2019-07-30"},{"lineNumber":97,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2019-07-30"},{"lineNumber":98,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-07-30"},{"lineNumber":99,"author":{"gitId":"-"},"content":"    const files \u003d event.dataTransfer.files;","lastModifiedDate":"2019-07-30"},{"lineNumber":100,"author":{"gitId":"-"},"content":"    if (files.length \u003e 0) {","lastModifiedDate":"2019-01-28"},{"lineNumber":101,"author":{"gitId":"-"},"content":"      this.readAndUploadFile(files[0]);","lastModifiedDate":"2019-01-28"},{"lineNumber":102,"author":{"gitId":"-"},"content":"      this.commentTextArea.nativeElement.focus();","lastModifiedDate":"2019-02-01"},{"lineNumber":103,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2019-01-28"},{"lineNumber":104,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-01-28"},{"lineNumber":105,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-28"},{"lineNumber":106,"author":{"gitId":"-"},"content":"  onDragExit(event) {","lastModifiedDate":"2019-01-28"},{"lineNumber":107,"author":{"gitId":"-"},"content":"    event.preventDefault();","lastModifiedDate":"2019-01-28"},{"lineNumber":108,"author":{"gitId":"-"},"content":"    event.stopPropagation();","lastModifiedDate":"2019-01-28"},{"lineNumber":109,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-28"},{"lineNumber":110,"author":{"gitId":"-"},"content":"    this.removeHighlightBorderStyle();","lastModifiedDate":"2019-01-28"},{"lineNumber":111,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-01-28"},{"lineNumber":112,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-28"},{"lineNumber":113,"author":{"gitId":"-"},"content":"  onFileInputUpload(event, fileInput) {","lastModifiedDate":"2019-02-01"},{"lineNumber":114,"author":{"gitId":"-"},"content":"    event.preventDefault();","lastModifiedDate":"2019-02-01"},{"lineNumber":115,"author":{"gitId":"-"},"content":"    event.stopPropagation();","lastModifiedDate":"2019-02-01"},{"lineNumber":116,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-02-01"},{"lineNumber":117,"author":{"gitId":"-"},"content":"    const files \u003d fileInput.files;","lastModifiedDate":"2019-02-01"},{"lineNumber":118,"author":{"gitId":"-"},"content":"    if (files.length \u003e 0) {","lastModifiedDate":"2019-02-01"},{"lineNumber":119,"author":{"gitId":"-"},"content":"      this.readAndUploadFile(files[0]);","lastModifiedDate":"2019-02-01"},{"lineNumber":120,"author":{"gitId":"-"},"content":"      fileInput.value \u003d \u0027\u0027;","lastModifiedDate":"2019-02-01"},{"lineNumber":121,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2019-02-01"},{"lineNumber":122,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-02-01"},{"lineNumber":123,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-02-01"},{"lineNumber":124,"author":{"gitId":"-"},"content":"  updateParentFormsSubmittability(isFormPending: boolean, submitButtonText: string) {","lastModifiedDate":"2019-10-22"},{"lineNumber":125,"author":{"gitId":"-"},"content":"      this.isFormPendingChange.emit(isFormPending);","lastModifiedDate":"2019-10-22"},{"lineNumber":126,"author":{"gitId":"-"},"content":"      this.submitButtonTextChange.emit(submitButtonText);","lastModifiedDate":"2019-10-22"},{"lineNumber":127,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-10-22"},{"lineNumber":128,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-10-22"},{"lineNumber":129,"author":{"gitId":"-"},"content":"  readAndUploadFile(file: File): void {","lastModifiedDate":"2019-01-28"},{"lineNumber":130,"author":{"gitId":"-"},"content":"    this.uploadErrorMessage \u003d null;","lastModifiedDate":"2019-02-02"},{"lineNumber":131,"author":{"gitId":"-"},"content":"    const reader \u003d new FileReader();","lastModifiedDate":"2019-01-28"},{"lineNumber":132,"author":{"gitId":"-"},"content":"    const filename \u003d file.name;","lastModifiedDate":"2019-01-28"},{"lineNumber":133,"author":{"gitId":"-"},"content":"    const insertedText \u003d this.insertUploadingText(filename);","lastModifiedDate":"2019-02-01"},{"lineNumber":134,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-28"},{"lineNumber":135,"author":{"gitId":"-"},"content":"    if (file.size \u003e\u003d MAX_UPLOAD_SIZE) {","lastModifiedDate":"2019-02-02"},{"lineNumber":136,"author":{"gitId":"-"},"content":"      const uploadSizeLimitMb \u003d MAX_UPLOAD_SIZE / BYTES_PER_MB;","lastModifiedDate":"2021-03-13"},{"lineNumber":137,"author":{"gitId":"-"},"content":"      this.handleUploadError(getSizeExceedErrorMsg(\u0027file\u0027, uploadSizeLimitMb), insertedText);","lastModifiedDate":"2021-03-13"},{"lineNumber":138,"author":{"gitId":"-"},"content":"      return;","lastModifiedDate":"2021-03-13"},{"lineNumber":139,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2021-03-13"},{"lineNumber":140,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2021-03-13"},{"lineNumber":141,"author":{"gitId":"-"},"content":"    if (this.uploadService.isVideoFile(filename) \u0026\u0026 file.size \u003e\u003d MAX_VIDEO_UPLOAD_SIZE) {","lastModifiedDate":"2021-03-13"},{"lineNumber":142,"author":{"gitId":"-"},"content":"      const videoUploadSizeLimitMb \u003d MAX_VIDEO_UPLOAD_SIZE / BYTES_PER_MB;","lastModifiedDate":"2021-03-13"},{"lineNumber":143,"author":{"gitId":"-"},"content":"      this.handleUploadError(getSizeExceedErrorMsg(\u0027video\u0027, videoUploadSizeLimitMb), insertedText);","lastModifiedDate":"2021-03-13"},{"lineNumber":144,"author":{"gitId":"-"},"content":"      return;","lastModifiedDate":"2019-02-02"},{"lineNumber":145,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2019-02-02"},{"lineNumber":146,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-02-02"},{"lineNumber":147,"author":{"gitId":"-"},"content":"    if (!this.uploadService.isSupportedFileType(filename)) {","lastModifiedDate":"2019-10-29"},{"lineNumber":148,"author":{"gitId":"-"},"content":"      this.handleUploadError(FILE_TYPE_SUPPORT_ERROR, insertedText);","lastModifiedDate":"2019-10-29"},{"lineNumber":149,"author":{"gitId":"-"},"content":"      return;","lastModifiedDate":"2019-10-29"},{"lineNumber":150,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2019-10-29"},{"lineNumber":151,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-10-29"},{"lineNumber":152,"author":{"gitId":"-"},"content":"    // Log the most recent upload.","lastModifiedDate":"2019-10-29"},{"lineNumber":153,"author":{"gitId":"-"},"content":"    this.lastUploadingTime \u003d new Date().getTime().toString();","lastModifiedDate":"2019-10-29"},{"lineNumber":154,"author":{"gitId":"-"},"content":"    const currentFileUploadTime \u003d this.lastUploadingTime;","lastModifiedDate":"2019-10-29"},{"lineNumber":155,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-10-22"},{"lineNumber":156,"author":{"gitId":"-"},"content":"    // Prevents Form Submission during Upload","lastModifiedDate":"2019-10-22"},{"lineNumber":157,"author":{"gitId":"-"},"content":"    this.updateParentFormsSubmittability(true, this.formatFileUploadingButtonText(this.initialSubmitButtonText));","lastModifiedDate":"2019-10-29"},{"lineNumber":158,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-10-22"},{"lineNumber":159,"author":{"gitId":"-"},"content":"    reader.onload \u003d () \u003d\u003e {","lastModifiedDate":"2019-01-28"},{"lineNumber":160,"author":{"gitId":"-"},"content":"      this.uploadService.uploadFile(reader.result, filename).subscribe((response) \u003d\u003e {","lastModifiedDate":"2019-02-16"},{"lineNumber":161,"author":{"gitId":"-"},"content":"        this.insertUploadUrl(filename, response.data.content.download_url);","lastModifiedDate":"2019-02-01"},{"lineNumber":162,"author":{"gitId":"-"},"content":"      }, (error) \u003d\u003e {","lastModifiedDate":"2019-01-28"},{"lineNumber":163,"author":{"gitId":"-"},"content":"        this.handleUploadError(error, insertedText);","lastModifiedDate":"2019-02-01"},{"lineNumber":164,"author":{"gitId":"-"},"content":"        // Allow button enabling if this is the last file that was uploaded.","lastModifiedDate":"2019-10-29"},{"lineNumber":165,"author":{"gitId":"-"},"content":"        if (currentFileUploadTime \u003d\u003d\u003d this.lastUploadingTime) {","lastModifiedDate":"2019-10-29"},{"lineNumber":166,"author":{"gitId":"-"},"content":"          this.updateParentFormsSubmittability(false, this.initialSubmitButtonText);","lastModifiedDate":"2019-10-29"},{"lineNumber":167,"author":{"gitId":"-"},"content":"        }","lastModifiedDate":"2019-10-29"},{"lineNumber":168,"author":{"gitId":"-"},"content":"      }, () \u003d\u003e {","lastModifiedDate":"2019-10-22"},{"lineNumber":169,"author":{"gitId":"-"},"content":"        // Allow button enabling if this is the last file that was uploaded.","lastModifiedDate":"2019-10-29"},{"lineNumber":170,"author":{"gitId":"-"},"content":"        if (currentFileUploadTime \u003d\u003d\u003d this.lastUploadingTime) {","lastModifiedDate":"2019-10-29"},{"lineNumber":171,"author":{"gitId":"-"},"content":"          this.updateParentFormsSubmittability(false, this.initialSubmitButtonText);","lastModifiedDate":"2019-10-29"},{"lineNumber":172,"author":{"gitId":"-"},"content":"        }","lastModifiedDate":"2019-10-29"},{"lineNumber":173,"author":{"gitId":"-"},"content":"      });","lastModifiedDate":"2019-01-28"},{"lineNumber":174,"author":{"gitId":"-"},"content":"    };","lastModifiedDate":"2019-01-28"},{"lineNumber":175,"author":{"gitId":"-"},"content":"    reader.readAsDataURL(file);","lastModifiedDate":"2019-01-28"},{"lineNumber":176,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-01-28"},{"lineNumber":177,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-28"},{"lineNumber":178,"author":{"gitId":"-"},"content":"  onPaste(event) {","lastModifiedDate":"2020-11-18"},{"lineNumber":179,"author":{"gitId":"-"},"content":"    const items \u003d event.clipboardData.items;","lastModifiedDate":"2020-11-18"},{"lineNumber":180,"author":{"gitId":"-"},"content":"    let blob \u003d null;","lastModifiedDate":"2020-11-18"},{"lineNumber":181,"author":{"gitId":"-"},"content":"    for (const item of items) {","lastModifiedDate":"2020-11-18"},{"lineNumber":182,"author":{"gitId":"-"},"content":"      if (item.type.indexOf(\u0027image\u0027) \u003d\u003d\u003d 0) {","lastModifiedDate":"2020-11-18"},{"lineNumber":183,"author":{"gitId":"-"},"content":"        blob \u003d item.getAsFile();","lastModifiedDate":"2020-11-18"},{"lineNumber":184,"author":{"gitId":"-"},"content":"        break;","lastModifiedDate":"2020-11-18"},{"lineNumber":185,"author":{"gitId":"-"},"content":"      }","lastModifiedDate":"2019-03-31"},{"lineNumber":186,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2019-10-29"},{"lineNumber":187,"author":{"gitId":"-"},"content":"    if (blob) {","lastModifiedDate":"2020-11-18"},{"lineNumber":188,"author":{"gitId":"-"},"content":"      this.readAndUploadFile(blob);","lastModifiedDate":"2020-11-18"},{"lineNumber":189,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2019-10-29"},{"lineNumber":190,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-03-31"},{"lineNumber":191,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-03-31"},{"lineNumber":192,"author":{"gitId":"-"},"content":"  get isInErrorState(): boolean {","lastModifiedDate":"2019-01-28"},{"lineNumber":193,"author":{"gitId":"-"},"content":"    return !!this.uploadErrorMessage;","lastModifiedDate":"2019-01-28"},{"lineNumber":194,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-01-28"},{"lineNumber":195,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-28"},{"lineNumber":196,"author":{"gitId":"-"},"content":"  private handleUploadError(error, insertedText: string) {","lastModifiedDate":"2019-02-01"},{"lineNumber":197,"author":{"gitId":"-"},"content":"    if (error instanceof HttpErrorResponse) {","lastModifiedDate":"2020-01-14"},{"lineNumber":198,"author":{"gitId":"-"},"content":"      this.errorHandlingService.handleError(error);","lastModifiedDate":"2020-01-14"},{"lineNumber":199,"author":{"gitId":"-"},"content":"      this.uploadErrorMessage \u003d \u0027Something went wrong while uploading your file. Please try again.\u0027;","lastModifiedDate":"2019-02-02"},{"lineNumber":200,"author":{"gitId":"-"},"content":"    } else {","lastModifiedDate":"2019-01-28"},{"lineNumber":201,"author":{"gitId":"-"},"content":"      this.uploadErrorMessage \u003d error;","lastModifiedDate":"2019-01-28"},{"lineNumber":202,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2019-01-28"},{"lineNumber":203,"author":{"gitId":"-"},"content":"    this.commentField.setValue(this.commentField.value.replace(insertedText, \u0027\u0027));","lastModifiedDate":"2019-02-01"},{"lineNumber":204,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-01-28"},{"lineNumber":205,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-28"},{"lineNumber":206,"author":{"gitId":"-"},"content":"  private insertUploadingText(filename: string): string {","lastModifiedDate":"2019-02-01"},{"lineNumber":207,"author":{"gitId":"-"},"content":"    const originalDescription \u003d this.commentField.value;","lastModifiedDate":"2019-01-28"},{"lineNumber":208,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-02-01"},{"lineNumber":209,"author":{"gitId":"-"},"content":"    const fileType \u003d filename.split(\u0027.\u0027).pop();","lastModifiedDate":"2019-10-01"},{"lineNumber":210,"author":{"gitId":"-"},"content":"    let toInsert: string;","lastModifiedDate":"2019-02-01"},{"lineNumber":211,"author":{"gitId":"-"},"content":"    if (DISPLAYABLE_CONTENT.includes(fileType.toLowerCase())) {","lastModifiedDate":"2019-11-01"},{"lineNumber":212,"author":{"gitId":"-"},"content":"      toInsert \u003d `![Uploading ${filename}...]\\n`;","lastModifiedDate":"2019-10-22"},{"lineNumber":213,"author":{"gitId":"-"},"content":"    } else {","lastModifiedDate":"2019-02-01"},{"lineNumber":214,"author":{"gitId":"-"},"content":"      toInsert \u003d `[Uploading ${filename}...]\\n`;","lastModifiedDate":"2019-10-22"},{"lineNumber":215,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2019-02-01"},{"lineNumber":216,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-28"},{"lineNumber":217,"author":{"gitId":"-"},"content":"    const cursorPosition \u003d this.commentTextArea.nativeElement.selectionEnd;","lastModifiedDate":"2019-04-01"},{"lineNumber":218,"author":{"gitId":"-"},"content":"    const endOfLineIndex \u003d originalDescription.indexOf(\u0027\\n\u0027, cursorPosition);","lastModifiedDate":"2019-04-01"},{"lineNumber":219,"author":{"gitId":"-"},"content":"    const nextCursorPosition \u003d cursorPosition + toInsert.length;","lastModifiedDate":"2019-04-01"},{"lineNumber":220,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-04-01"},{"lineNumber":221,"author":{"gitId":"-"},"content":"    if (endOfLineIndex \u003d\u003d\u003d -1) {","lastModifiedDate":"2019-01-28"},{"lineNumber":222,"author":{"gitId":"-"},"content":"      if (this.commentField.value \u003d\u003d\u003d \u0027\u0027) {","lastModifiedDate":"2019-01-28"},{"lineNumber":223,"author":{"gitId":"-"},"content":"        this.commentField.setValue(toInsert);","lastModifiedDate":"2019-01-28"},{"lineNumber":224,"author":{"gitId":"-"},"content":"      } else {","lastModifiedDate":"2019-01-28"},{"lineNumber":225,"author":{"gitId":"-"},"content":"        this.commentField.setValue(`${this.commentField.value}\\n${toInsert}`);","lastModifiedDate":"2019-01-28"},{"lineNumber":226,"author":{"gitId":"-"},"content":"      }","lastModifiedDate":"2019-01-28"},{"lineNumber":227,"author":{"gitId":"-"},"content":"    } else {","lastModifiedDate":"2019-01-28"},{"lineNumber":228,"author":{"gitId":"-"},"content":"      const startTillNewline \u003d originalDescription.slice(0, endOfLineIndex + 1);","lastModifiedDate":"2019-01-28"},{"lineNumber":229,"author":{"gitId":"-"},"content":"      const newlineTillEnd \u003d originalDescription.slice(endOfLineIndex);","lastModifiedDate":"2019-01-28"},{"lineNumber":230,"author":{"gitId":"-"},"content":"      this.commentField.setValue(`${startTillNewline + toInsert + newlineTillEnd}`);","lastModifiedDate":"2019-01-28"},{"lineNumber":231,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2019-01-28"},{"lineNumber":232,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-04-01"},{"lineNumber":233,"author":{"gitId":"-"},"content":"    this.commentTextArea.nativeElement.setSelectionRange(nextCursorPosition, nextCursorPosition);","lastModifiedDate":"2019-04-01"},{"lineNumber":234,"author":{"gitId":"-"},"content":"    return toInsert;","lastModifiedDate":"2019-02-01"},{"lineNumber":235,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-01-28"},{"lineNumber":236,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-28"},{"lineNumber":237,"author":{"gitId":"-"},"content":"  private insertUploadUrl(filename: string, uploadUrl: string) {","lastModifiedDate":"2019-01-28"},{"lineNumber":238,"author":{"gitId":"-"},"content":"    const cursorPosition \u003d this.commentTextArea.nativeElement.selectionEnd;","lastModifiedDate":"2019-04-01"},{"lineNumber":239,"author":{"gitId":"-"},"content":"    const startIndexOfString \u003d this.commentField.value.indexOf(`[Uploading ${filename}...]`);","lastModifiedDate":"2019-10-22"},{"lineNumber":240,"author":{"gitId":"-"},"content":"    const endIndexOfString \u003d startIndexOfString + `[Uploading ${filename}...]`.length;","lastModifiedDate":"2019-10-22"},{"lineNumber":241,"author":{"gitId":"-"},"content":"    const endOfInsertedString \u003d startIndexOfString + `[${filename}](${uploadUrl})`.length;","lastModifiedDate":"2019-04-01"},{"lineNumber":242,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-04-01"},{"lineNumber":243,"author":{"gitId":"-"},"content":"    this.commentField.setValue(","lastModifiedDate":"2019-01-28"},{"lineNumber":244,"author":{"gitId":"-"},"content":"      this.commentField.value.replace(`[Uploading ${filename}...]`, `[${filename}](${uploadUrl})`));","lastModifiedDate":"2019-10-22"},{"lineNumber":245,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-04-01"},{"lineNumber":246,"author":{"gitId":"-"},"content":"    if (cursorPosition \u003e startIndexOfString - 1 \u0026\u0026 cursorPosition \u003c\u003d endIndexOfString) { // within the range of uploading text","lastModifiedDate":"2019-04-01"},{"lineNumber":247,"author":{"gitId":"-"},"content":"      this.commentTextArea.nativeElement.setSelectionRange(endOfInsertedString, endOfInsertedString);","lastModifiedDate":"2019-04-01"},{"lineNumber":248,"author":{"gitId":"-"},"content":"    } else {","lastModifiedDate":"2019-04-01"},{"lineNumber":249,"author":{"gitId":"-"},"content":"      this.commentTextArea.nativeElement.setSelectionRange(cursorPosition, cursorPosition);","lastModifiedDate":"2019-04-01"},{"lineNumber":250,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2019-04-01"},{"lineNumber":251,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-01-28"},{"lineNumber":252,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2019-01-28"},{"lineNumber":253,"author":{"gitId":"-"},"content":"  private removeHighlightBorderStyle() {","lastModifiedDate":"2019-01-28"},{"lineNumber":254,"author":{"gitId":"-"},"content":"    this.dragActiveCounter--;","lastModifiedDate":"2019-01-28"},{"lineNumber":255,"author":{"gitId":"-"},"content":"    if (this.dragActiveCounter \u003d\u003d\u003d 0) { // To make sure when dragging over a child element, drop area is still highlight.","lastModifiedDate":"2019-01-28"},{"lineNumber":256,"author":{"gitId":"-"},"content":"      this.dropArea.nativeElement.classList.remove(\u0027highlight-drag-box\u0027);","lastModifiedDate":"2019-01-28"},{"lineNumber":257,"author":{"gitId":"-"},"content":"      this.dropArea.nativeElement.classList.remove(\u0027highlight-drag-box-disabled\u0027);","lastModifiedDate":"2019-07-30"},{"lineNumber":258,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2019-01-28"},{"lineNumber":259,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2019-01-28"},{"lineNumber":260,"author":{"gitId":"-"},"content":"}","lastModifiedDate":"2019-01-25"}],"authorContributionMap":{"AudreyFelicio":1,"-":259}},{"path":"src/app/shared/view-issue/new-team-response/new-team-response.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Component, EventEmitter, Input, OnInit, Output } from \u0027@angular/core\u0027;","lastModifiedDate":"2020-01-14"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { IssueService } from \u0027../../../core/services/issue.service\u0027;","lastModifiedDate":"2020-01-14"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { FormBuilder, FormGroup, NgForm, Validators } from \u0027@angular/forms\u0027;","lastModifiedDate":"2020-01-14"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { Issue, SEVERITY_ORDER, STATUS } from \u0027../../../core/models/issue.model\u0027;","lastModifiedDate":"2020-01-14"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import { ErrorHandlingService } from \u0027../../../core/services/error-handling.service\u0027;","lastModifiedDate":"2020-01-14"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import { finalize, flatMap, map } from \u0027rxjs/operators\u0027;","lastModifiedDate":"2020-01-14"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import { Observable, throwError } from \u0027rxjs\u0027;","lastModifiedDate":"2020-09-12"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import { LabelService } from \u0027../../../core/services/label.service\u0027;","lastModifiedDate":"2020-01-14"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import { IssueComment } from \u0027../../../core/models/comment.model\u0027;","lastModifiedDate":"2020-01-14"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import { SUBMIT_BUTTON_TEXT } from \u0027../view-issue.component\u0027;","lastModifiedDate":"2020-01-14"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import { Conflict } from \u0027../../../core/models/conflict/conflict.model\u0027;","lastModifiedDate":"2020-01-14"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import { MatDialog } from \u0027@angular/material\u0027;","lastModifiedDate":"2020-01-14"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import { ConflictDialogComponent } from \u0027./conflict-dialog/conflict-dialog.component\u0027;","lastModifiedDate":"2020-01-14"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import { PhaseService } from \u0027../../../core/services/phase.service\u0027;","lastModifiedDate":"2020-01-14"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import { MatCheckboxChange } from \u0027@angular/material/checkbox\u0027;","lastModifiedDate":"2020-01-14"},{"lineNumber":16,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":17,"author":{"gitId":"-"},"content":"@Component({","lastModifiedDate":"2020-01-14"},{"lineNumber":18,"author":{"gitId":"-"},"content":"  selector: \u0027app-new-team-response\u0027,","lastModifiedDate":"2020-01-14"},{"lineNumber":19,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./new-team-response.component.html\u0027,","lastModifiedDate":"2020-01-14"},{"lineNumber":20,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./new-team-response.component.css\u0027]","lastModifiedDate":"2020-01-14"},{"lineNumber":21,"author":{"gitId":"-"},"content":"})","lastModifiedDate":"2020-01-14"},{"lineNumber":22,"author":{"gitId":"-"},"content":"export class NewTeamResponseComponent implements OnInit {","lastModifiedDate":"2020-01-14"},{"lineNumber":23,"author":{"gitId":"-"},"content":"  newTeamResponseForm: FormGroup;","lastModifiedDate":"2020-01-14"},{"lineNumber":24,"author":{"gitId":"-"},"content":"  teamMembers: string[];","lastModifiedDate":"2020-01-14"},{"lineNumber":25,"author":{"gitId":"-"},"content":"  duplicatedIssueList: Observable\u003cIssue[]\u003e;","lastModifiedDate":"2020-01-14"},{"lineNumber":26,"author":{"gitId":"-"},"content":"  conflict: Conflict;","lastModifiedDate":"2020-01-14"},{"lineNumber":27,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  isFormPending \u003d false;","lastModifiedDate":"2020-01-14"},{"lineNumber":29,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":30,"author":{"gitId":"-"},"content":"  submitButtonText: string;","lastModifiedDate":"2020-01-14"},{"lineNumber":31,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":32,"author":{"gitId":"-"},"content":"  @Input() issue: Issue;","lastModifiedDate":"2020-01-14"},{"lineNumber":33,"author":{"gitId":"-"},"content":"  @Output() issueUpdated \u003d new EventEmitter\u003cIssue\u003e();","lastModifiedDate":"2020-01-14"},{"lineNumber":34,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":35,"author":{"gitId":"-"},"content":"  constructor(private issueService: IssueService,","lastModifiedDate":"2020-01-14"},{"lineNumber":36,"author":{"gitId":"-"},"content":"              private formBuilder: FormBuilder,","lastModifiedDate":"2020-01-14"},{"lineNumber":37,"author":{"gitId":"-"},"content":"              public labelService: LabelService,","lastModifiedDate":"2020-01-14"},{"lineNumber":38,"author":{"gitId":"-"},"content":"              private errorHandlingService: ErrorHandlingService,","lastModifiedDate":"2020-01-14"},{"lineNumber":39,"author":{"gitId":"-"},"content":"              private dialog: MatDialog,","lastModifiedDate":"2020-01-14"},{"lineNumber":40,"author":{"gitId":"-"},"content":"              private phaseService: PhaseService) { }","lastModifiedDate":"2020-01-14"},{"lineNumber":41,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":42,"author":{"gitId":"-"},"content":"  ngOnInit() {","lastModifiedDate":"2020-01-14"},{"lineNumber":43,"author":{"gitId":"-"},"content":"    this.teamMembers \u003d this.issue.teamAssigned.teamMembers.map((member) \u003d\u003e {","lastModifiedDate":"2020-01-14"},{"lineNumber":44,"author":{"gitId":"-"},"content":"      return member.loginId;","lastModifiedDate":"2020-01-14"},{"lineNumber":45,"author":{"gitId":"-"},"content":"    });","lastModifiedDate":"2020-01-14"},{"lineNumber":46,"author":{"gitId":"-"},"content":"    this.duplicatedIssueList \u003d this.getDupIssueList();","lastModifiedDate":"2020-01-14"},{"lineNumber":47,"author":{"gitId":"-"},"content":"    this.newTeamResponseForm \u003d this.formBuilder.group({","lastModifiedDate":"2020-01-14"},{"lineNumber":48,"author":{"gitId":"AudreyFelicio"},"content":"      description: [\u0027\u0027],","lastModifiedDate":"2021-06-24"},{"lineNumber":49,"author":{"gitId":"-"},"content":"      severity: [this.issue.severity, Validators.required],","lastModifiedDate":"2020-01-14"},{"lineNumber":50,"author":{"gitId":"-"},"content":"      type: [this.issue.type, Validators.required],","lastModifiedDate":"2020-01-14"},{"lineNumber":51,"author":{"gitId":"-"},"content":"      responseTag: [this.issue.responseTag, Validators.required],","lastModifiedDate":"2020-01-14"},{"lineNumber":52,"author":{"gitId":"-"},"content":"      assignees: [this.issue.assignees.map(a \u003d\u003e a.toLowerCase())],","lastModifiedDate":"2020-01-14"},{"lineNumber":53,"author":{"gitId":"-"},"content":"      duplicated: [false],","lastModifiedDate":"2020-01-14"},{"lineNumber":54,"author":{"gitId":"-"},"content":"      duplicateOf: [\u0027\u0027]","lastModifiedDate":"2020-01-14"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    });","lastModifiedDate":"2020-01-14"},{"lineNumber":56,"author":{"gitId":"-"},"content":"    this.duplicated.valueChanges.subscribe(checked \u003d\u003e {","lastModifiedDate":"2020-01-14"},{"lineNumber":57,"author":{"gitId":"-"},"content":"      if (checked) {","lastModifiedDate":"2020-01-14"},{"lineNumber":58,"author":{"gitId":"-"},"content":"        this.duplicateOf.setValidators(Validators.required);","lastModifiedDate":"2020-01-14"},{"lineNumber":59,"author":{"gitId":"-"},"content":"        this.responseTag.setValidators(null);","lastModifiedDate":"2020-01-14"},{"lineNumber":60,"author":{"gitId":"-"},"content":"      } else {","lastModifiedDate":"2020-01-14"},{"lineNumber":61,"author":{"gitId":"-"},"content":"        this.duplicateOf.setValidators(null);","lastModifiedDate":"2020-01-14"},{"lineNumber":62,"author":{"gitId":"-"},"content":"        this.responseTag.setValidators(Validators.required);","lastModifiedDate":"2020-01-14"},{"lineNumber":63,"author":{"gitId":"-"},"content":"      }","lastModifiedDate":"2020-01-14"},{"lineNumber":64,"author":{"gitId":"-"},"content":"      this.duplicateOf.updateValueAndValidity();","lastModifiedDate":"2020-01-14"},{"lineNumber":65,"author":{"gitId":"-"},"content":"      this.responseTag.updateValueAndValidity();","lastModifiedDate":"2020-01-14"},{"lineNumber":66,"author":{"gitId":"-"},"content":"    });","lastModifiedDate":"2020-01-14"},{"lineNumber":67,"author":{"gitId":"-"},"content":"    this.submitButtonText \u003d SUBMIT_BUTTON_TEXT.SUBMIT;","lastModifiedDate":"2020-01-14"},{"lineNumber":68,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-01-14"},{"lineNumber":69,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":70,"author":{"gitId":"-"},"content":"  submitNewTeamResponse(form: NgForm) {","lastModifiedDate":"2020-01-14"},{"lineNumber":71,"author":{"gitId":"-"},"content":"    if (this.newTeamResponseForm.invalid) {","lastModifiedDate":"2020-01-14"},{"lineNumber":72,"author":{"gitId":"-"},"content":"      return;","lastModifiedDate":"2020-01-14"},{"lineNumber":73,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2020-01-14"},{"lineNumber":74,"author":{"gitId":"-"},"content":"    this.isFormPending \u003d true;","lastModifiedDate":"2020-01-14"},{"lineNumber":75,"author":{"gitId":"-"},"content":"    const latestIssue \u003d this.getUpdatedIssue();","lastModifiedDate":"2020-01-14"},{"lineNumber":76,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":77,"author":{"gitId":"-"},"content":"    this.isSafeToSubmit().pipe(","lastModifiedDate":"2020-01-14"},{"lineNumber":78,"author":{"gitId":"-"},"content":"      flatMap((isSaveToSubmit: boolean) \u003d\u003e {","lastModifiedDate":"2020-01-14"},{"lineNumber":79,"author":{"gitId":"-"},"content":"        const newCommentDescription \u003d latestIssue.createGithubTeamResponse();","lastModifiedDate":"2020-01-14"},{"lineNumber":80,"author":{"gitId":"-"},"content":"        if (isSaveToSubmit) {","lastModifiedDate":"2020-01-14"},{"lineNumber":81,"author":{"gitId":"-"},"content":"          return this.issueService.createTeamResponse(latestIssue);","lastModifiedDate":"2020-09-12"},{"lineNumber":82,"author":{"gitId":"-"},"content":"        } else if (this.submitButtonText \u003d\u003d\u003d SUBMIT_BUTTON_TEXT.OVERWRITE) {","lastModifiedDate":"2020-01-14"},{"lineNumber":83,"author":{"gitId":"-"},"content":"          const issueCommentId \u003d this.issueService.issues[this.issue.id].issueComment.id;","lastModifiedDate":"2020-01-14"},{"lineNumber":84,"author":{"gitId":"-"},"content":"          return this.issueService.updateIssueWithComment(latestIssue, \u003cIssueComment\u003e{","lastModifiedDate":"2020-09-12"},{"lineNumber":85,"author":{"gitId":"-"},"content":"            id: issueCommentId,","lastModifiedDate":"2020-01-14"},{"lineNumber":86,"author":{"gitId":"-"},"content":"            description: newCommentDescription,","lastModifiedDate":"2020-01-14"},{"lineNumber":87,"author":{"gitId":"-"},"content":"          });","lastModifiedDate":"2020-09-12"},{"lineNumber":88,"author":{"gitId":"-"},"content":"        } else {","lastModifiedDate":"2020-01-14"},{"lineNumber":89,"author":{"gitId":"-"},"content":"          this.conflict \u003d new Conflict(\u0027 \u0027, this.issueService.issues[this.issue.id].teamResponse);","lastModifiedDate":"2020-01-14"},{"lineNumber":90,"author":{"gitId":"-"},"content":"          this.submitButtonText \u003d SUBMIT_BUTTON_TEXT.OVERWRITE;","lastModifiedDate":"2020-01-14"},{"lineNumber":91,"author":{"gitId":"-"},"content":"          this.viewUpdatedResponse();","lastModifiedDate":"2020-01-14"},{"lineNumber":92,"author":{"gitId":"-"},"content":"          return throwError(\u0027A response has been submitted. Please verify the changes and try again.\u0027);","lastModifiedDate":"2020-01-14"},{"lineNumber":93,"author":{"gitId":"-"},"content":"        }","lastModifiedDate":"2020-01-14"},{"lineNumber":94,"author":{"gitId":"-"},"content":"      }),","lastModifiedDate":"2020-01-14"},{"lineNumber":95,"author":{"gitId":"-"},"content":"      finalize(() \u003d\u003e this.isFormPending \u003d false)","lastModifiedDate":"2020-01-14"},{"lineNumber":96,"author":{"gitId":"-"},"content":"    ).subscribe((updatedIssue: Issue) \u003d\u003e {","lastModifiedDate":"2020-09-12"},{"lineNumber":97,"author":{"gitId":"-"},"content":"      // updatedIssue.issueComment \u003d updatedComment;","lastModifiedDate":"2020-09-12"},{"lineNumber":98,"author":{"gitId":"-"},"content":"      this.issueUpdated.emit(updatedIssue);","lastModifiedDate":"2020-01-14"},{"lineNumber":99,"author":{"gitId":"-"},"content":"      form.resetForm();","lastModifiedDate":"2020-03-02"},{"lineNumber":100,"author":{"gitId":"-"},"content":"    }, (error) \u003d\u003e {","lastModifiedDate":"2020-01-14"},{"lineNumber":101,"author":{"gitId":"-"},"content":"      this.errorHandlingService.handleError(error);","lastModifiedDate":"2020-01-14"},{"lineNumber":102,"author":{"gitId":"-"},"content":"    });","lastModifiedDate":"2020-01-14"},{"lineNumber":103,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-01-14"},{"lineNumber":104,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":105,"author":{"gitId":"-"},"content":"  /**","lastModifiedDate":"2020-01-14"},{"lineNumber":106,"author":{"gitId":"-"},"content":"   * @return - Determines whether it is safe to submit a tester response.","lastModifiedDate":"2020-01-14"},{"lineNumber":107,"author":{"gitId":"-"},"content":"   */","lastModifiedDate":"2020-01-14"},{"lineNumber":108,"author":{"gitId":"-"},"content":"  isSafeToSubmit(): Observable\u003cboolean\u003e {","lastModifiedDate":"2020-01-14"},{"lineNumber":109,"author":{"gitId":"-"},"content":"    return this.issueService.getLatestIssue(this.issue.id).pipe(","lastModifiedDate":"2020-01-14"},{"lineNumber":110,"author":{"gitId":"-"},"content":"      map((issue: Issue) \u003d\u003e {","lastModifiedDate":"2020-01-14"},{"lineNumber":111,"author":{"gitId":"-"},"content":"        return !issue.teamResponse;","lastModifiedDate":"2020-01-14"},{"lineNumber":112,"author":{"gitId":"-"},"content":"      })","lastModifiedDate":"2020-01-14"},{"lineNumber":113,"author":{"gitId":"-"},"content":"    );","lastModifiedDate":"2020-01-14"},{"lineNumber":114,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-01-14"},{"lineNumber":115,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":116,"author":{"gitId":"-"},"content":"  /**","lastModifiedDate":"2020-01-14"},{"lineNumber":117,"author":{"gitId":"-"},"content":"   * @return - an updated copy of issue with its updated value from the form.","lastModifiedDate":"2020-01-14"},{"lineNumber":118,"author":{"gitId":"-"},"content":"   */","lastModifiedDate":"2020-01-14"},{"lineNumber":119,"author":{"gitId":"-"},"content":"  getUpdatedIssue(): Issue {","lastModifiedDate":"2020-01-14"},{"lineNumber":120,"author":{"gitId":"-"},"content":"    const clone \u003d this.issue.clone(this.phaseService.currentPhase);","lastModifiedDate":"2020-01-14"},{"lineNumber":121,"author":{"gitId":"-"},"content":"    clone.severity \u003d this.severity.value;","lastModifiedDate":"2020-01-14"},{"lineNumber":122,"author":{"gitId":"-"},"content":"    clone.type \u003d this.type.value;","lastModifiedDate":"2020-01-14"},{"lineNumber":123,"author":{"gitId":"-"},"content":"    clone.assignees \u003d this.assignees.value;","lastModifiedDate":"2020-01-14"},{"lineNumber":124,"author":{"gitId":"-"},"content":"    clone.responseTag \u003d this.responseTag.value;","lastModifiedDate":"2020-01-14"},{"lineNumber":125,"author":{"gitId":"-"},"content":"    clone.duplicated \u003d this.duplicated.value;","lastModifiedDate":"2020-01-14"},{"lineNumber":126,"author":{"gitId":"-"},"content":"    clone.duplicateOf \u003d this.duplicateOf.value;","lastModifiedDate":"2020-01-14"},{"lineNumber":127,"author":{"gitId":"-"},"content":"    clone.status \u003d STATUS.Done;","lastModifiedDate":"2020-01-14"},{"lineNumber":128,"author":{"gitId":"-"},"content":"    clone.teamResponse \u003d Issue.updateTeamResponse(this.description.value);","lastModifiedDate":"2020-02-28"},{"lineNumber":129,"author":{"gitId":"-"},"content":"    return clone;","lastModifiedDate":"2020-01-14"},{"lineNumber":130,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-01-14"},{"lineNumber":131,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":132,"author":{"gitId":"-"},"content":"  dupIssueOptionIsDisabled(issue: Issue): boolean {","lastModifiedDate":"2020-01-14"},{"lineNumber":133,"author":{"gitId":"-"},"content":"    return SEVERITY_ORDER[this.severity.value] \u003e SEVERITY_ORDER[issue.severity] || (issue.duplicated || !!issue.duplicateOf);","lastModifiedDate":"2020-01-14"},{"lineNumber":134,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-01-14"},{"lineNumber":135,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":136,"author":{"gitId":"-"},"content":"  getDisabledDupOptionErrorText(issue: Issue): string {","lastModifiedDate":"2020-01-14"},{"lineNumber":137,"author":{"gitId":"-"},"content":"    const reason \u003d new Array\u003cstring\u003e();","lastModifiedDate":"2020-01-14"},{"lineNumber":138,"author":{"gitId":"-"},"content":"    if (this.dupIssueOptionIsDisabled(issue)) {","lastModifiedDate":"2020-01-14"},{"lineNumber":139,"author":{"gitId":"-"},"content":"      if (SEVERITY_ORDER[this.severity.value] \u003e SEVERITY_ORDER[issue.severity]) {","lastModifiedDate":"2020-01-14"},{"lineNumber":140,"author":{"gitId":"-"},"content":"        reason.push(\u0027Issue of lower priority\u0027);","lastModifiedDate":"2020-01-14"},{"lineNumber":141,"author":{"gitId":"-"},"content":"      } else if (issue.duplicated || !!issue.duplicateOf) {","lastModifiedDate":"2020-01-14"},{"lineNumber":142,"author":{"gitId":"-"},"content":"        reason.push(\u0027A duplicated issue\u0027);","lastModifiedDate":"2020-01-14"},{"lineNumber":143,"author":{"gitId":"-"},"content":"      }","lastModifiedDate":"2020-01-14"},{"lineNumber":144,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2020-01-14"},{"lineNumber":145,"author":{"gitId":"-"},"content":"    return reason.join(\u0027, \u0027);","lastModifiedDate":"2020-01-14"},{"lineNumber":146,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-01-14"},{"lineNumber":147,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":148,"author":{"gitId":"-"},"content":"  handleChangeOfDuplicateCheckbox(event: MatCheckboxChange) {","lastModifiedDate":"2020-01-14"},{"lineNumber":149,"author":{"gitId":"-"},"content":"    if (event.checked) {","lastModifiedDate":"2020-01-14"},{"lineNumber":150,"author":{"gitId":"-"},"content":"      this.responseTag.setValue(\u0027\u0027);","lastModifiedDate":"2020-01-14"},{"lineNumber":151,"author":{"gitId":"-"},"content":"      this.assignees.setValue([]);","lastModifiedDate":"2020-01-14"},{"lineNumber":152,"author":{"gitId":"-"},"content":"      this.responseTag.markAsUntouched();","lastModifiedDate":"2020-01-14"},{"lineNumber":153,"author":{"gitId":"-"},"content":"    } else {","lastModifiedDate":"2020-01-14"},{"lineNumber":154,"author":{"gitId":"-"},"content":"      this.duplicateOf.setValue(\u0027\u0027);","lastModifiedDate":"2020-01-14"},{"lineNumber":155,"author":{"gitId":"-"},"content":"      this.duplicateOf.markAsUntouched();","lastModifiedDate":"2020-01-14"},{"lineNumber":156,"author":{"gitId":"-"},"content":"    }","lastModifiedDate":"2020-01-14"},{"lineNumber":157,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-01-14"},{"lineNumber":158,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":159,"author":{"gitId":"-"},"content":"  /**","lastModifiedDate":"2020-01-14"},{"lineNumber":160,"author":{"gitId":"-"},"content":"   * Pops up a dialog that shows the updated team response that was submitted.","lastModifiedDate":"2020-01-14"},{"lineNumber":161,"author":{"gitId":"-"},"content":"   */","lastModifiedDate":"2020-01-14"},{"lineNumber":162,"author":{"gitId":"-"},"content":"  viewUpdatedResponse(): void {","lastModifiedDate":"2020-01-14"},{"lineNumber":163,"author":{"gitId":"-"},"content":"    this.dialog.open(ConflictDialogComponent, {","lastModifiedDate":"2020-01-14"},{"lineNumber":164,"author":{"gitId":"-"},"content":"      data: this.issueService.issues[this.issue.id],","lastModifiedDate":"2020-01-14"},{"lineNumber":165,"author":{"gitId":"-"},"content":"      autoFocus: false","lastModifiedDate":"2020-01-14"},{"lineNumber":166,"author":{"gitId":"-"},"content":"    });","lastModifiedDate":"2020-01-14"},{"lineNumber":167,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-01-14"},{"lineNumber":168,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":169,"author":{"gitId":"-"},"content":"  refresh(): void {","lastModifiedDate":"2020-01-14"},{"lineNumber":170,"author":{"gitId":"-"},"content":"    const updatedIssue \u003d this.issueService.issues[this.issue.id];","lastModifiedDate":"2020-01-14"},{"lineNumber":171,"author":{"gitId":"-"},"content":"    this.issueUpdated.emit(updatedIssue);","lastModifiedDate":"2020-01-14"},{"lineNumber":172,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-01-14"},{"lineNumber":173,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":174,"author":{"gitId":"-"},"content":"  private getDupIssueList(): Observable\u003cIssue[]\u003e {","lastModifiedDate":"2020-01-14"},{"lineNumber":175,"author":{"gitId":"-"},"content":"    return this.issueService.issues$.pipe(map((issues) \u003d\u003e {","lastModifiedDate":"2020-01-14"},{"lineNumber":176,"author":{"gitId":"-"},"content":"      return issues.filter((issue) \u003d\u003e {","lastModifiedDate":"2020-01-14"},{"lineNumber":177,"author":{"gitId":"-"},"content":"        return this.issue.id !\u003d\u003d issue.id;","lastModifiedDate":"2020-01-14"},{"lineNumber":178,"author":{"gitId":"-"},"content":"      });","lastModifiedDate":"2020-01-14"},{"lineNumber":179,"author":{"gitId":"-"},"content":"    }));","lastModifiedDate":"2020-01-14"},{"lineNumber":180,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-01-14"},{"lineNumber":181,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":182,"author":{"gitId":"-"},"content":"  get description() {","lastModifiedDate":"2020-01-14"},{"lineNumber":183,"author":{"gitId":"-"},"content":"    return this.newTeamResponseForm.get(\u0027description\u0027);","lastModifiedDate":"2020-01-14"},{"lineNumber":184,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-01-14"},{"lineNumber":185,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":186,"author":{"gitId":"-"},"content":"  get severity() {","lastModifiedDate":"2020-01-14"},{"lineNumber":187,"author":{"gitId":"-"},"content":"    return this.newTeamResponseForm.get(\u0027severity\u0027);","lastModifiedDate":"2020-01-14"},{"lineNumber":188,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-01-14"},{"lineNumber":189,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":190,"author":{"gitId":"-"},"content":"  get type() {","lastModifiedDate":"2020-01-14"},{"lineNumber":191,"author":{"gitId":"-"},"content":"    return this.newTeamResponseForm.get(\u0027type\u0027);","lastModifiedDate":"2020-01-14"},{"lineNumber":192,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-01-14"},{"lineNumber":193,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":194,"author":{"gitId":"-"},"content":"  get assignees() {","lastModifiedDate":"2020-01-14"},{"lineNumber":195,"author":{"gitId":"-"},"content":"    return this.newTeamResponseForm.get(\u0027assignees\u0027);","lastModifiedDate":"2020-01-14"},{"lineNumber":196,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-01-14"},{"lineNumber":197,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":198,"author":{"gitId":"-"},"content":"  get responseTag() {","lastModifiedDate":"2020-01-14"},{"lineNumber":199,"author":{"gitId":"-"},"content":"    return this.newTeamResponseForm.get(\u0027responseTag\u0027);","lastModifiedDate":"2020-01-14"},{"lineNumber":200,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-01-14"},{"lineNumber":201,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":202,"author":{"gitId":"-"},"content":"  get duplicated() {","lastModifiedDate":"2020-01-14"},{"lineNumber":203,"author":{"gitId":"-"},"content":"    return this.newTeamResponseForm.get(\u0027duplicated\u0027);","lastModifiedDate":"2020-01-14"},{"lineNumber":204,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-01-14"},{"lineNumber":205,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2020-01-14"},{"lineNumber":206,"author":{"gitId":"-"},"content":"  get duplicateOf() {","lastModifiedDate":"2020-01-14"},{"lineNumber":207,"author":{"gitId":"-"},"content":"    return this.newTeamResponseForm.get(\u0027duplicateOf\u0027);","lastModifiedDate":"2020-01-14"},{"lineNumber":208,"author":{"gitId":"-"},"content":"  }","lastModifiedDate":"2020-01-14"},{"lineNumber":209,"author":{"gitId":"-"},"content":"}","lastModifiedDate":"2020-01-14"}],"authorContributionMap":{"AudreyFelicio":1,"-":208}},{"path":"tests/services/phase.service.spec.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { of } from \u0027rxjs\u0027;","lastModifiedDate":"2021-02-04"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { NO_ACCESSIBLE_PHASES } from \u0027../../src/app/core/models/session.model\u0027;","lastModifiedDate":"2021-03-05"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { PhaseService } from \u0027../../src/app/core/services/phase.service\u0027;","lastModifiedDate":"2021-02-08"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { Phase } from \u0027../../src/app/core/models/phase.model\u0027;","lastModifiedDate":"2021-02-08"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import {","lastModifiedDate":"2021-03-05"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  BUG_REPORTING_PHASE_SESSION_DATA,","lastModifiedDate":"2021-03-05"},{"lineNumber":7,"author":{"gitId":"-"},"content":"  MODERATION_PHASE_SESSION_DATA,","lastModifiedDate":"2021-03-05"},{"lineNumber":8,"author":{"gitId":"-"},"content":"  MULTIPLE_OPEN_PHASES_SESSION_DATA,","lastModifiedDate":"2021-03-05"},{"lineNumber":9,"author":{"gitId":"-"},"content":"  NO_OPEN_PHASES_SESSION_DATA","lastModifiedDate":"2021-03-05"},{"lineNumber":10,"author":{"gitId":"-"},"content":"} from \u0027../constants/session.constants\u0027;","lastModifiedDate":"2021-03-05"},{"lineNumber":11,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2021-02-04"},{"lineNumber":12,"author":{"gitId":"-"},"content":"let phaseService: PhaseService;","lastModifiedDate":"2021-02-04"},{"lineNumber":13,"author":{"gitId":"-"},"content":"let githubService: any;","lastModifiedDate":"2021-02-04"},{"lineNumber":14,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2021-02-04"},{"lineNumber":15,"author":{"gitId":"-"},"content":"describe(\u0027PhaseService\u0027, () \u003d\u003e {","lastModifiedDate":"2021-02-04"},{"lineNumber":16,"author":{"gitId":"-"},"content":"  beforeEach(() \u003d\u003e {","lastModifiedDate":"2021-02-04"},{"lineNumber":17,"author":{"gitId":"-"},"content":"    githubService \u003d jasmine.createSpyObj(\u0027GithubService\u0027, [\u0027fetchSettingsFile\u0027, \u0027storePhaseDetails\u0027]);","lastModifiedDate":"2021-03-03"},{"lineNumber":18,"author":{"gitId":"-"},"content":"    phaseService \u003d new PhaseService(null, githubService, null, null, null);","lastModifiedDate":"2021-04-05"},{"lineNumber":19,"author":{"gitId":"-"},"content":"  });","lastModifiedDate":"2021-02-04"},{"lineNumber":20,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2021-02-04"},{"lineNumber":21,"author":{"gitId":"-"},"content":"  describe(\u0027.storeSessionData()\u0027, () \u003d\u003e {","lastModifiedDate":"2021-02-04"},{"lineNumber":22,"author":{"gitId":"zatkiller"},"content":"    it(\u0027should not throw any errors if there is a defined openPhase\u0027, () \u003d\u003e {","lastModifiedDate":"2021-07-04"},{"lineNumber":23,"author":{"gitId":"-"},"content":"      githubService.fetchSettingsFile.and.returnValue(of(BUG_REPORTING_PHASE_SESSION_DATA));","lastModifiedDate":"2021-03-05"},{"lineNumber":24,"author":{"gitId":"zatkiller"},"content":"      phaseService.storeSessionData().subscribe({","lastModifiedDate":"2021-07-04"},{"lineNumber":25,"author":{"gitId":"zatkiller"},"content":"        error: () \u003d\u003e fail()","lastModifiedDate":"2021-07-04"},{"lineNumber":26,"author":{"gitId":"-"},"content":"      });","lastModifiedDate":"2021-02-04"},{"lineNumber":27,"author":{"gitId":"-"},"content":"    });","lastModifiedDate":"2021-02-04"},{"lineNumber":28,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2021-02-04"},{"lineNumber":29,"author":{"gitId":"zatkiller"},"content":"    it(\u0027should not throw any errors if there are multiple defined openPhases\u0027, () \u003d\u003e {","lastModifiedDate":"2021-07-04"},{"lineNumber":30,"author":{"gitId":"-"},"content":"      githubService.fetchSettingsFile.and.returnValue(of(MULTIPLE_OPEN_PHASES_SESSION_DATA));","lastModifiedDate":"2021-03-05"},{"lineNumber":31,"author":{"gitId":"zatkiller"},"content":"      phaseService.storeSessionData().subscribe({","lastModifiedDate":"2021-07-04"},{"lineNumber":32,"author":{"gitId":"zatkiller"},"content":"        error: () \u003d\u003e fail()","lastModifiedDate":"2021-07-04"},{"lineNumber":33,"author":{"gitId":"-"},"content":"      });","lastModifiedDate":"2021-02-04"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    });","lastModifiedDate":"2021-02-04"},{"lineNumber":35,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2021-02-04"},{"lineNumber":36,"author":{"gitId":"-"},"content":"    it(\u0027should throw an error if no openPhases are defined\u0027, () \u003d\u003e {","lastModifiedDate":"2021-02-15"},{"lineNumber":37,"author":{"gitId":"-"},"content":"      githubService.fetchSettingsFile.and.returnValue(of(NO_OPEN_PHASES_SESSION_DATA));","lastModifiedDate":"2021-03-05"},{"lineNumber":38,"author":{"gitId":"-"},"content":"      phaseService.storeSessionData().subscribe({","lastModifiedDate":"2021-02-15"},{"lineNumber":39,"author":{"gitId":"-"},"content":"        next: () \u003d\u003e fail(),","lastModifiedDate":"2021-02-15"},{"lineNumber":40,"author":{"gitId":"-"},"content":"        error: (err) \u003d\u003e expect(err).toEqual(new Error(NO_ACCESSIBLE_PHASES))","lastModifiedDate":"2021-02-15"},{"lineNumber":41,"author":{"gitId":"-"},"content":"      });","lastModifiedDate":"2021-02-04"},{"lineNumber":42,"author":{"gitId":"-"},"content":"    });","lastModifiedDate":"2021-02-04"},{"lineNumber":43,"author":{"gitId":"-"},"content":"  });","lastModifiedDate":"2021-02-04"},{"lineNumber":44,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2021-02-04"},{"lineNumber":45,"author":{"gitId":"-"},"content":"  describe(\u0027.githubRepoPermissionLevel()\u0027, () \u003d\u003e {","lastModifiedDate":"2021-02-04"},{"lineNumber":46,"author":{"gitId":"-"},"content":"    it(\u0027should return \"repo\" if phaseModeration is included in openPhases\u0027, () \u003d\u003e {","lastModifiedDate":"2021-02-04"},{"lineNumber":47,"author":{"gitId":"-"},"content":"      phaseService.sessionData \u003d MODERATION_PHASE_SESSION_DATA;","lastModifiedDate":"2021-03-05"},{"lineNumber":48,"author":{"gitId":"-"},"content":"      expect(phaseService.sessionData.openPhases).toContain(Phase.phaseModeration);","lastModifiedDate":"2021-02-04"},{"lineNumber":49,"author":{"gitId":"-"},"content":"      expect(phaseService.githubRepoPermissionLevel()).toEqual(\u0027repo\u0027);","lastModifiedDate":"2021-02-04"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    });","lastModifiedDate":"2021-02-04"},{"lineNumber":51,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2021-02-04"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    it(\u0027should return \"public_repo\" if phaseModeration is not included in openPhases\u0027, () \u003d\u003e {","lastModifiedDate":"2021-02-04"},{"lineNumber":53,"author":{"gitId":"-"},"content":"      phaseService.sessionData \u003d NO_OPEN_PHASES_SESSION_DATA;","lastModifiedDate":"2021-03-05"},{"lineNumber":54,"author":{"gitId":"-"},"content":"      expect(phaseService.sessionData.openPhases).not.toContain(Phase.phaseModeration);","lastModifiedDate":"2021-02-04"},{"lineNumber":55,"author":{"gitId":"-"},"content":"      expect(phaseService.githubRepoPermissionLevel()).toEqual(\u0027public_repo\u0027);","lastModifiedDate":"2021-02-04"},{"lineNumber":56,"author":{"gitId":"-"},"content":"    });","lastModifiedDate":"2021-02-04"},{"lineNumber":57,"author":{"gitId":"-"},"content":"  });","lastModifiedDate":"2021-02-04"},{"lineNumber":58,"author":{"gitId":"-"},"content":"","lastModifiedDate":"2021-02-04"},{"lineNumber":59,"author":{"gitId":"-"},"content":"  describe(\u0027.reset()\u0027, () \u003d\u003e {","lastModifiedDate":"2021-02-04"},{"lineNumber":60,"author":{"gitId":"-"},"content":"    it(\u0027should reset the currentPhase of the PhaseService\u0027, () \u003d\u003e {","lastModifiedDate":"2021-02-04"},{"lineNumber":61,"author":{"gitId":"-"},"content":"      phaseService.currentPhase \u003d Phase.phaseBugReporting;","lastModifiedDate":"2021-02-04"},{"lineNumber":62,"author":{"gitId":"-"},"content":"      phaseService.reset();","lastModifiedDate":"2021-02-04"},{"lineNumber":63,"author":{"gitId":"-"},"content":"      expect(phaseService.currentPhase).toBeNull();","lastModifiedDate":"2021-02-04"},{"lineNumber":64,"author":{"gitId":"-"},"content":"    });","lastModifiedDate":"2021-02-04"},{"lineNumber":65,"author":{"gitId":"-"},"content":"  });","lastModifiedDate":"2021-02-04"},{"lineNumber":66,"author":{"gitId":"-"},"content":"});","lastModifiedDate":"2021-02-04"}],"authorContributionMap":{"zatkiller":6,"-":60}}]
